Object.defineProperty(exports, '__esModule', {
  value: true
});

var _config = require('./config');

'use babel';

exports['default'] = {
  config: _config.Settings,
  subscriptions: null,

  activate: function activate(state) {
    this.handlePaneChanged();
    this.handleSettingChanged();
  },

  deactivate: function deactivate() {},

  handlePaneChanged: function handlePaneChanged() {
    var _this = this;

    atom.workspace.onDidStopChangingActivePaneItem(function (editor) {
      _this.loadGrammar(editor);
    });
  },

  handleSettingChanged: function handleSettingChanged() {
    var _this2 = this;

    atom.config.observe('language-dotenv.dotenvFileNames', function (newValue) {
      _this2.loadGrammar(atom.workspace.getActiveTextEditor());
    });
  },

  loadGrammar: function loadGrammar(editor) {
    if (!editor || !editor.getBuffer) {
      return;
    }

    var buffer = editor.getBuffer();
    if (!buffer.file || !buffer.file.path) {
      return;
    }

    var filename = buffer.getBaseName();
    if (atom.config.get('language-dotenv.dotenvFileNames').includes(filename)) {
      atom.textEditors.setGrammarOverride(editor, 'source.dotenv');
    }
  }
};
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdWRwcmF3YXQvLmF0b20vcGFja2FnZXMvbGFuZ3VhZ2UtZG90ZW52L2xpYi9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBRXlCLFVBQVU7O0FBRm5DLFdBQVcsQ0FBQzs7cUJBSUc7QUFDYixRQUFNLGtCQUFVO0FBQ2hCLGVBQWEsRUFBRSxJQUFJOztBQUVuQixVQUFRLEVBQUEsa0JBQUMsS0FBSyxFQUFFO0FBQ2QsUUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7QUFDekIsUUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7R0FDN0I7O0FBRUQsWUFBVSxFQUFBLHNCQUFHLEVBRVo7O0FBRUQsbUJBQWlCLEVBQUEsNkJBQUc7OztBQUNsQixRQUFJLENBQUMsU0FBUyxDQUFDLCtCQUErQixDQUFDLFVBQUMsTUFBTSxFQUFLO0FBQ3pELFlBQUssV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQzFCLENBQUMsQ0FBQztHQUNKOztBQUVELHNCQUFvQixFQUFBLGdDQUFHOzs7QUFDckIsUUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsaUNBQWlDLEVBQUUsVUFBQyxRQUFRLEVBQUs7QUFDbkUsYUFBSyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUM7S0FDeEQsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsYUFBVyxFQUFBLHFCQUFDLE1BQU0sRUFBRTtBQUNsQixRQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRTtBQUFFLGFBQU87S0FBRTs7QUFFN0MsUUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ2hDLFFBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFBRSxhQUFPO0tBQUU7O0FBRWxELFFBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNwQyxRQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGlDQUFpQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQ3pFLFVBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxFQUFFLGVBQWUsQ0FBQyxDQUFDO0tBQzlEO0dBQ0Y7Q0FDRiIsImZpbGUiOiIvVXNlcnMvc3VkcHJhd2F0Ly5hdG9tL3BhY2thZ2VzL2xhbmd1YWdlLWRvdGVudi9saWIvbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuXG5pbXBvcnQgeyBTZXR0aW5ncyB9IGZyb20gJy4vY29uZmlnJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBjb25maWc6IFNldHRpbmdzLFxuICBzdWJzY3JpcHRpb25zOiBudWxsLFxuICBcbiAgYWN0aXZhdGUoc3RhdGUpIHtcbiAgICB0aGlzLmhhbmRsZVBhbmVDaGFuZ2VkKCk7XG4gICAgdGhpcy5oYW5kbGVTZXR0aW5nQ2hhbmdlZCgpO1xuICB9LFxuICBcbiAgZGVhY3RpdmF0ZSgpIHtcbiAgICBcbiAgfSxcbiAgXG4gIGhhbmRsZVBhbmVDaGFuZ2VkKCkge1xuICAgIGF0b20ud29ya3NwYWNlLm9uRGlkU3RvcENoYW5naW5nQWN0aXZlUGFuZUl0ZW0oKGVkaXRvcikgPT4ge1xuICAgICAgdGhpcy5sb2FkR3JhbW1hcihlZGl0b3IpO1xuICAgIH0pO1xuICB9LFxuICBcbiAgaGFuZGxlU2V0dGluZ0NoYW5nZWQoKSB7XG4gICAgYXRvbS5jb25maWcub2JzZXJ2ZSgnbGFuZ3VhZ2UtZG90ZW52LmRvdGVudkZpbGVOYW1lcycsIChuZXdWYWx1ZSkgPT4ge1xuICAgICAgdGhpcy5sb2FkR3JhbW1hcihhdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVUZXh0RWRpdG9yKCkpO1xuICAgIH0pO1xuICB9LFxuICBcbiAgbG9hZEdyYW1tYXIoZWRpdG9yKSB7XG4gICAgaWYgKCFlZGl0b3IgfHwgIWVkaXRvci5nZXRCdWZmZXIpIHsgcmV0dXJuOyB9XG4gICAgXG4gICAgdmFyIGJ1ZmZlciA9IGVkaXRvci5nZXRCdWZmZXIoKTtcbiAgICBpZiAoIWJ1ZmZlci5maWxlIHx8ICFidWZmZXIuZmlsZS5wYXRoKSB7IHJldHVybjsgfVxuICAgIFxuICAgIHZhciBmaWxlbmFtZSA9IGJ1ZmZlci5nZXRCYXNlTmFtZSgpO1xuICAgIGlmIChhdG9tLmNvbmZpZy5nZXQoJ2xhbmd1YWdlLWRvdGVudi5kb3RlbnZGaWxlTmFtZXMnKS5pbmNsdWRlcyhmaWxlbmFtZSkpIHtcbiAgICAgIGF0b20udGV4dEVkaXRvcnMuc2V0R3JhbW1hck92ZXJyaWRlKGVkaXRvciwgJ3NvdXJjZS5kb3RlbnYnKTtcbiAgICB9XG4gIH1cbn07XG4iXX0=