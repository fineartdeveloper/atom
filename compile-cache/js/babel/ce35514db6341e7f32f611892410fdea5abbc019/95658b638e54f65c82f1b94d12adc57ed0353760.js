Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _lodashIsArray = require('lodash/isArray');

var _lodashIsArray2 = _interopRequireDefault(_lodashIsArray);

var _lodashIsObject = require('lodash/isObject');

var _lodashIsObject2 = _interopRequireDefault(_lodashIsObject);

var _lodashIsNil = require('lodash/isNil');

var _lodashIsNil2 = _interopRequireDefault(_lodashIsNil);

'use babel';

var ANY_TYPE = 'any';
exports.ANY_TYPE = ANY_TYPE;
var OBJECT_TYPE = 'object';
exports.OBJECT_TYPE = OBJECT_TYPE;
var ARRAY_TYPE = 'array';
exports.ARRAY_TYPE = ARRAY_TYPE;
var ONE_OF_TYPE = 'oneOf';
exports.ONE_OF_TYPE = ONE_OF_TYPE;
var ANY_OF_TYPE = 'anyOf';
exports.ANY_OF_TYPE = ANY_OF_TYPE;
var ALL_OF_TYPE = 'allOf';
exports.ALL_OF_TYPE = ALL_OF_TYPE;
var ENUM_TYPE = 'enum';
exports.ENUM_TYPE = ENUM_TYPE;
var BOOLEAN_TYPE = 'boolean';
exports.BOOLEAN_TYPE = BOOLEAN_TYPE;
var NUMBER_TYPE = 'number';
exports.NUMBER_TYPE = NUMBER_TYPE;
var STRING_TYPE = 'string';
exports.STRING_TYPE = STRING_TYPE;
var NULL_TYPE = 'null';

exports.NULL_TYPE = NULL_TYPE;
var schemaType = function schemaType(schema) {
  if ((0, _lodashIsNil2['default'])(schema)) {
    return ANY_TYPE;
  }

  if (!schema.allOf && !schema.anyOf && !schema.oneOf) {
    if (schema.type === 'object' || (0, _lodashIsObject2['default'])(schema.properties) && !schema.type) {
      return OBJECT_TYPE;
    } else if (schema.type === 'array' || (0, _lodashIsObject2['default'])(schema.items) && !schema.type) {
      return ARRAY_TYPE;
    }
  }

  if ((0, _lodashIsArray2['default'])(schema.oneOf)) {
    return ONE_OF_TYPE;
  } else if ((0, _lodashIsArray2['default'])(schema.anyOf)) {
    return ANY_OF_TYPE;
  } else if ((0, _lodashIsArray2['default'])(schema.allOf)) {
    return ALL_OF_TYPE;
  } else if ((0, _lodashIsObject2['default'])(schema['enum'])) {
    return ENUM_TYPE;
  }

  switch (schema.type) {
    case 'boolean':
      return BOOLEAN_TYPE;
    case 'number':
      return NUMBER_TYPE;
    case 'integer':
      return NUMBER_TYPE;
    case 'string':
      return STRING_TYPE;
    case 'null':
      return NULL_TYPE;
    default:
      break;
  }

  return ANY_TYPE;
};
exports.schemaType = schemaType;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdWRwcmF3YXQvLmF0b20vcGFja2FnZXMvYXV0b2NvbXBsZXRlLWpzb24vc3JjL2pzb24tc2NoZW1hLXR5cGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs2QkFFb0IsZ0JBQWdCOzs7OzhCQUNmLGlCQUFpQjs7OzsyQkFDcEIsY0FBYzs7OztBQUpoQyxXQUFXLENBQUE7O0FBTUosSUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFBOztBQUN0QixJQUFNLFdBQVcsR0FBRyxRQUFRLENBQUE7O0FBQzVCLElBQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQTs7QUFDMUIsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFBOztBQUMzQixJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUE7O0FBQzNCLElBQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQTs7QUFDM0IsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFBOztBQUN4QixJQUFNLFlBQVksR0FBRyxTQUFTLENBQUE7O0FBQzlCLElBQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQTs7QUFDNUIsSUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFBOztBQUM1QixJQUFNLFNBQVMsR0FBRyxNQUFNLENBQUE7OztBQUV4QixJQUFNLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBRyxNQUFNLEVBQUk7QUFDbEMsTUFBSSw4QkFBTSxNQUFNLENBQUMsRUFBRTtBQUNqQixXQUFPLFFBQVEsQ0FBQTtHQUNoQjs7QUFFRCxNQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFO0FBQ25ELFFBQUksTUFBTSxDQUFDLElBQUksS0FBSyxRQUFRLElBQUssaUNBQVMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQUFBQyxFQUFFO0FBQzdFLGFBQU8sV0FBVyxDQUFBO0tBQ25CLE1BQU0sSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLE9BQU8sSUFBSyxpQ0FBUyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxBQUFDLEVBQUU7QUFDOUUsYUFBTyxVQUFVLENBQUE7S0FDbEI7R0FDRjs7QUFFRCxNQUFJLGdDQUFRLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUN6QixXQUFPLFdBQVcsQ0FBQTtHQUNuQixNQUFNLElBQUksZ0NBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ2hDLFdBQU8sV0FBVyxDQUFBO0dBQ25CLE1BQU0sSUFBSSxnQ0FBUSxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDaEMsV0FBTyxXQUFXLENBQUE7R0FDbkIsTUFBTSxJQUFJLGlDQUFTLE1BQU0sUUFBSyxDQUFDLEVBQUU7QUFDaEMsV0FBTyxTQUFTLENBQUE7R0FDakI7O0FBRUQsVUFBUSxNQUFNLENBQUMsSUFBSTtBQUNqQixTQUFLLFNBQVM7QUFBRSxhQUFPLFlBQVksQ0FBQTtBQUFBLEFBQ25DLFNBQUssUUFBUTtBQUFFLGFBQU8sV0FBVyxDQUFBO0FBQUEsQUFDakMsU0FBSyxTQUFTO0FBQUUsYUFBTyxXQUFXLENBQUE7QUFBQSxBQUNsQyxTQUFLLFFBQVE7QUFBRSxhQUFPLFdBQVcsQ0FBQTtBQUFBLEFBQ2pDLFNBQUssTUFBTTtBQUFFLGFBQU8sU0FBUyxDQUFBO0FBQUEsQUFDN0I7QUFBUyxZQUFLO0FBQUEsR0FDZjs7QUFFRCxTQUFPLFFBQVEsQ0FBQTtDQUNoQixDQUFBIiwiZmlsZSI6Ii9Vc2Vycy9zdWRwcmF3YXQvLmF0b20vcGFja2FnZXMvYXV0b2NvbXBsZXRlLWpzb24vc3JjL2pzb24tc2NoZW1hLXR5cGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCdcblxuaW1wb3J0IGlzQXJyYXkgZnJvbSAnbG9kYXNoL2lzQXJyYXknXG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnbG9kYXNoL2lzT2JqZWN0J1xuaW1wb3J0IGlzTmlsIGZyb20gJ2xvZGFzaC9pc05pbCdcblxuZXhwb3J0IGNvbnN0IEFOWV9UWVBFID0gJ2FueSdcbmV4cG9ydCBjb25zdCBPQkpFQ1RfVFlQRSA9ICdvYmplY3QnXG5leHBvcnQgY29uc3QgQVJSQVlfVFlQRSA9ICdhcnJheSdcbmV4cG9ydCBjb25zdCBPTkVfT0ZfVFlQRSA9ICdvbmVPZidcbmV4cG9ydCBjb25zdCBBTllfT0ZfVFlQRSA9ICdhbnlPZidcbmV4cG9ydCBjb25zdCBBTExfT0ZfVFlQRSA9ICdhbGxPZidcbmV4cG9ydCBjb25zdCBFTlVNX1RZUEUgPSAnZW51bSdcbmV4cG9ydCBjb25zdCBCT09MRUFOX1RZUEUgPSAnYm9vbGVhbidcbmV4cG9ydCBjb25zdCBOVU1CRVJfVFlQRSA9ICdudW1iZXInXG5leHBvcnQgY29uc3QgU1RSSU5HX1RZUEUgPSAnc3RyaW5nJ1xuZXhwb3J0IGNvbnN0IE5VTExfVFlQRSA9ICdudWxsJ1xuXG5leHBvcnQgY29uc3Qgc2NoZW1hVHlwZSA9IHNjaGVtYSA9PiB7XG4gIGlmIChpc05pbChzY2hlbWEpKSB7XG4gICAgcmV0dXJuIEFOWV9UWVBFXG4gIH1cblxuICBpZiAoIXNjaGVtYS5hbGxPZiAmJiAhc2NoZW1hLmFueU9mICYmICFzY2hlbWEub25lT2YpIHtcbiAgICBpZiAoc2NoZW1hLnR5cGUgPT09ICdvYmplY3QnIHx8IChpc09iamVjdChzY2hlbWEucHJvcGVydGllcykgJiYgIXNjaGVtYS50eXBlKSkge1xuICAgICAgcmV0dXJuIE9CSkVDVF9UWVBFXG4gICAgfSBlbHNlIGlmIChzY2hlbWEudHlwZSA9PT0gJ2FycmF5JyB8fCAoaXNPYmplY3Qoc2NoZW1hLml0ZW1zKSAmJiAhc2NoZW1hLnR5cGUpKSB7XG4gICAgICByZXR1cm4gQVJSQVlfVFlQRVxuICAgIH1cbiAgfVxuXG4gIGlmIChpc0FycmF5KHNjaGVtYS5vbmVPZikpIHtcbiAgICByZXR1cm4gT05FX09GX1RZUEVcbiAgfSBlbHNlIGlmIChpc0FycmF5KHNjaGVtYS5hbnlPZikpIHtcbiAgICByZXR1cm4gQU5ZX09GX1RZUEVcbiAgfSBlbHNlIGlmIChpc0FycmF5KHNjaGVtYS5hbGxPZikpIHtcbiAgICByZXR1cm4gQUxMX09GX1RZUEVcbiAgfSBlbHNlIGlmIChpc09iamVjdChzY2hlbWEuZW51bSkpIHtcbiAgICByZXR1cm4gRU5VTV9UWVBFXG4gIH1cblxuICBzd2l0Y2ggKHNjaGVtYS50eXBlKSB7XG4gICAgY2FzZSAnYm9vbGVhbic6IHJldHVybiBCT09MRUFOX1RZUEVcbiAgICBjYXNlICdudW1iZXInOiByZXR1cm4gTlVNQkVSX1RZUEVcbiAgICBjYXNlICdpbnRlZ2VyJzogcmV0dXJuIE5VTUJFUl9UWVBFXG4gICAgY2FzZSAnc3RyaW5nJzogcmV0dXJuIFNUUklOR19UWVBFXG4gICAgY2FzZSAnbnVsbCc6IHJldHVybiBOVUxMX1RZUEVcbiAgICBkZWZhdWx0OiBicmVha1xuICB9XG5cbiAgcmV0dXJuIEFOWV9UWVBFXG59XG4iXX0=