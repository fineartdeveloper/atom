Object.defineProperty(exports, '__esModule', {
	value: true
});

var init = _asyncToGenerator(function* (editor, onSave, type) {
	var selectedText = onSave ? null : editor.getSelectedText();
	var text = selectedText || editor.getText();

	var options = {};

	if (editor.getGrammar().scopeName === 'source.css') {
		options.parser = _postcssSafeParser2['default'];
	} else {
		options.syntax = _postcssScss2['default'];
	}

	try {
		var result = undefined;
		if (type === 'prefix') {
			result = yield (0, _postcss2['default'])((0, _autoprefixer2['default'])(atom.config.get('autoprefixer'))).process(text, options);
		} else {
			result = yield (0, _postcss2['default'])([(0, _postcssUnprefix2['default'])()]).process(text, options);
		}

		result.warnings().forEach(function (x) {
			console.warn(x.toString());
			atom.notifications.addWarning('Autoprefixer', {
				detail: x.toString()
			});
		});

		var cursorPosition = editor.getCursorBufferPosition();
		var line = atom.views.getView(editor).getFirstVisibleScreenRow() + editor.getVerticalScrollMargin();

		if (selectedText) {
			editor.setTextInBufferRange(editor.getSelectedBufferRange(), result.css);
		} else {
			editor.getBuffer().setTextViaDiff(result.css);
		}

		editor.setCursorBufferPosition(cursorPosition);

		if (editor.getScreenLineCount() > line) {
			editor.scrollToScreenPosition([line, 0]);
		}
	} catch (error) {
		if (error.name === 'CssSyntaxError') {
			error.message += error.showSourceCode();
		}

		console.error(error);
		atom.notifications.addError('Autoprefixer', { detail: error.message });
	}
});

exports.deactivate = deactivate;
exports.activate = activate;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }

/** @babel */

var _atom = require('atom');

var _postcss = require('postcss');

var _postcss2 = _interopRequireDefault(_postcss);

var _autoprefixer = require('autoprefixer');

var _autoprefixer2 = _interopRequireDefault(_autoprefixer);

var _postcssSafeParser = require('postcss-safe-parser');

var _postcssSafeParser2 = _interopRequireDefault(_postcssSafeParser);

var _postcssScss = require('postcss-scss');

var _postcssScss2 = _interopRequireDefault(_postcssScss);

var _postcssUnprefix = require('postcss-unprefix');

var _postcssUnprefix2 = _interopRequireDefault(_postcssUnprefix);

var SUPPORTED_SCOPES = new Set(['source.css', 'source.css.scss']);

var config = {
	browsers: {
		title: 'Supported Browsers',
		description: 'Using the [following syntax](https://github.com/ai/browserslist#queries).',
		type: 'array',
		'default': _autoprefixer2['default'].defaults,
		items: {
			type: 'string'
		}
	},
	cascade: {
		title: 'Cascade Prefixes',
		type: 'boolean',
		'default': true
	},
	remove: {
		title: 'Remove Unneeded Prefixes',
		type: 'boolean',
		'default': true
	},
	runOnSave: {
		title: 'Run on Save',
		type: 'boolean',
		'default': false
	}
};

exports.config = config;

function deactivate() {
	this.subscriptions.dispose();
}

function activate() {
	this.subscriptions = new _atom.CompositeDisposable();

	this.subscriptions.add(atom.workspace.observeTextEditors(function (editor) {
		editor.getBuffer().onWillSave(_asyncToGenerator(function* () {
			var isCSS = SUPPORTED_SCOPES.has(editor.getGrammar().scopeName);

			if (isCSS && atom.config.get('autoprefixer.runOnSave')) {
				yield init(editor, true, 'prefix');
			}
		}));
	}));

	this.subscriptions.add(atom.commands.add('atom-workspace', 'autoprefixer:prefix', function () {
		var editor = atom.workspace.getActiveTextEditor();

		if (editor) {
			init(editor, false, 'prefix');
		}
	}));

	this.subscriptions.add(atom.commands.add('atom-workspace', 'autoprefixer:remove-prefixes', function () {
		var editor = atom.workspace.getActiveTextEditor();

		if (editor) {
			init(editor, false, 'removePrefixes');
		}
	}));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdWRwcmF3YXQvLmF0b20vcGFja2FnZXMvYXV0b3ByZWZpeGVyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7SUFhZSxJQUFJLHFCQUFuQixXQUFvQixNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUN6QyxLQUFNLFlBQVksR0FBRyxNQUFNLEdBQUcsSUFBSSxHQUFHLE1BQU0sQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUM5RCxLQUFNLElBQUksR0FBRyxZQUFZLElBQUksTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDOztBQUU5QyxLQUFNLE9BQU8sR0FBRyxFQUFFLENBQUM7O0FBRW5CLEtBQUksTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDLFNBQVMsS0FBSyxZQUFZLEVBQUU7QUFDbkQsU0FBTyxDQUFDLE1BQU0saUNBQW9CLENBQUM7RUFDbkMsTUFBTTtBQUNOLFNBQU8sQ0FBQyxNQUFNLDJCQUFjLENBQUM7RUFDN0I7O0FBRUQsS0FBSTtBQUNILE1BQUksTUFBTSxZQUFBLENBQUM7QUFDWCxNQUFJLElBQUksS0FBSyxRQUFRLEVBQUU7QUFDdEIsU0FBTSxHQUFHLE1BQU0sMEJBQVEsK0JBQWEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDN0YsTUFBTTtBQUNOLFNBQU0sR0FBRyxNQUFNLDBCQUFRLENBQUMsbUNBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztHQUM1RDs7QUFFRCxRQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQUEsQ0FBQyxFQUFJO0FBQzlCLFVBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7QUFDM0IsT0FBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsY0FBYyxF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QUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLEVBQUU7QUFDdkQsVUFBTSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNuQztHQUNELEVBQUMsQ0FBQztFQUNILENBQUMsQ0FBQyxDQUFDOztBQUVKLEtBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLHFCQUFxQixFQUFFLFlBQU07QUFDdkYsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDOztBQUVwRCxNQUFJLE1BQU0sRUFBRTtBQUNYLE9BQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0dBQzlCO0VBQ0QsQ0FBQyxDQUFDLENBQUM7O0FBRUosS0FBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsOEJBQThCLEVBQUUsWUFBTTtBQUNoRyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFtQixFQUFFLENBQUM7O0FBRXBELE1BQUksTUFBTSxFQUFFO0FBQ1gsT0FBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztHQUN0QztFQUNELENBQUMsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL1VzZXJzL3N1ZHByYXdhdC8uYXRvbS9wYWNrYWdlcy9hdXRvcHJlZml4ZXIvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQGJhYmVsICovXG5pbXBvcnQge0NvbXBvc2l0ZURpc3Bvc2FibGV9IGZyb20gJ2F0b20nO1xuaW1wb3J0IHBvc3Rjc3MgZnJvbSAncG9zdGNzcyc7XG5pbXBvcnQgYXV0b3ByZWZpeGVyIGZyb20gJ2F1dG9wcmVmaXhlcic7XG5pbXBvcnQgcG9zdGNzc1NhZmVQYXJzZXIgZnJvbSAncG9zdGNzcy1zYWZlLXBhcnNlcic7XG5pbXBvcnQgcG9zdGNzc1Njc3MgZnJvbSAncG9zdGNzcy1zY3NzJztcbmltcG9ydCB1bnByZWZpeCBmcm9tICdwb3N0Y3NzLXVucHJlZml4JztcblxuY29uc3QgU1VQUE9SVEVEX1NDT1BFUyA9IG5ldyBTZXQoW1xuXHQnc291cmNlLmNzcycsXG5cdCdzb3VyY2UuY3NzLnNjc3MnXG5dKTtcblxuYXN5bmMgZnVuY3Rpb24gaW5pdChlZGl0b3IsIG9uU2F2ZSwgdHlwZSkge1xuXHRjb25zdCBzZWxlY3RlZFRleHQgPSBvblNhdmUgPyBudWxsIDogZWRpdG9yLmdldFNlbGVjdGVkVGV4dCgpO1xuXHRjb25zdCB0ZXh0ID0gc2VsZWN0ZWRUZXh0IHx8IGVkaXRvci5nZXRUZXh0KCk7XG5cblx0Y29uc3Qgb3B0aW9ucyA9IHt9O1xuXG5cdGlmIChlZGl0b3IuZ2V0R3JhbW1hcigpLnNjb3BlTmFtZSA9PT0gJ3NvdXJjZS5jc3MnKSB7XG5cdFx0b3B0aW9ucy5wYXJzZXIgPSBwb3N0Y3NzU2FmZVBhcnNlcjtcblx0fSBlbHNlIHtcblx0XHRvcHRpb25zLnN5bnRheCA9IHBvc3Rjc3NTY3NzO1xuXHR9XG5cblx0dHJ5IHtcblx0XHRsZXQgcmVzdWx0O1xuXHRcdGlmICh0eXBlID09PSAncHJlZml4Jykge1xuXHRcdFx0cmVzdWx0ID0gYXdhaXQgcG9zdGNzcyhhdXRvcHJlZml4ZXIoYXRvbS5jb25maWcuZ2V0KCdhdXRvcHJlZml4ZXInKSkpLnByb2Nlc3ModGV4dCwgb3B0aW9ucyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IGF3YWl0IHBvc3Rjc3MoW3VucHJlZml4KCldKS5wcm9jZXNzKHRleHQsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdHJlc3VsdC53YXJuaW5ncygpLmZvckVhY2goeCA9PiB7XG5cdFx0XHRjb25zb2xlLndhcm4oeC50b1N0cmluZygpKTtcblx0XHRcdGF0b20ubm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKCdBdXRvcHJlZml4ZXInLCB7XG5cdFx0XHRcdGRldGFpbDogeC50b1N0cmluZygpXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IGN1cnNvclBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk7XG5cdFx0Y29uc3QgbGluZSA9IGF0b20udmlld3MuZ2V0VmlldyhlZGl0b3IpLmdldEZpcnN0VmlzaWJsZVNjcmVlblJvdygpICtcblx0XHRcdGVkaXRvci5nZXRWZXJ0aWNhbFNjcm9sbE1hcmdpbigpO1xuXG5cdFx0aWYgKHNlbGVjdGVkVGV4dCkge1xuXHRcdFx0ZWRpdG9yLnNldFRleHRJbkJ1ZmZlclJhbmdlKGVkaXRvci5nZXRTZWxlY3RlZEJ1ZmZlclJhbmdlKCksIHJlc3VsdC5jc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlZGl0b3IuZ2V0QnVmZmVyKCkuc2V0VGV4dFZpYURpZmYocmVzdWx0LmNzcyk7XG5cdFx0fVxuXG5cdFx0ZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKGN1cnNvclBvc2l0aW9uKTtcblxuXHRcdGlmIChlZGl0b3IuZ2V0U2NyZWVuTGluZUNvdW50KCkgPiBsaW5lKSB7XG5cdFx0XHRlZGl0b3Iuc2Nyb2xsVG9TY3JlZW5Qb3NpdGlvbihbbGluZSwgMF0pO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IubmFtZSA9PT0gJ0Nzc1N5bnRheEVycm9yJykge1xuXHRcdFx0ZXJyb3IubWVzc2FnZSArPSBlcnJvci5zaG93U291cmNlQ29kZSgpO1xuXHRcdH1cblxuXHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdGF0b20ubm90aWZpY2F0aW9ucy5hZGRFcnJvcignQXV0b3ByZWZpeGVyJywge2RldGFpbDogZXJyb3IubWVzc2FnZX0pO1xuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG5cdGJyb3dzZXJzOiB7XG5cdFx0dGl0bGU6ICdTdXBwb3J0ZWQgQnJvd3NlcnMnLFxuXHRcdGRlc2NyaXB0aW9uOiAnVXNpbmcgdGhlIFtmb2xsb3dpbmcgc3ludGF4XShodHRwczovL2dpdGh1Yi5jb20vYWkvYnJvd3NlcnNsaXN0I3F1ZXJpZXMpLicsXG5cdFx0dHlwZTogJ2FycmF5Jyxcblx0XHRkZWZhdWx0OiBhdXRvcHJlZml4ZXIuZGVmYXVsdHMsXG5cdFx0aXRlbXM6IHtcblx0XHRcdHR5cGU6ICdzdHJpbmcnXG5cdFx0fVxuXHR9LFxuXHRjYXNjYWRlOiB7XG5cdFx0dGl0bGU6ICdDYXNjYWRlIFByZWZpeGVzJyxcblx0XHR0eXBlOiAnYm9vbGVhbicsXG5cdFx0ZGVmYXVsdDogdHJ1ZVxuXHR9LFxuXHRyZW1vdmU6IHtcblx0XHR0aXRsZTogJ1JlbW92ZSBVbm5lZWRlZCBQcmVmaXhlcycsXG5cdFx0dHlwZTogJ2Jvb2xlYW4nLFxuXHRcdGRlZmF1bHQ6IHRydWVcblx0fSxcblx0cnVuT25TYXZlOiB7XG5cdFx0dGl0bGU6ICdSdW4gb24gU2F2ZScsXG5cdFx0dHlwZTogJ2Jvb2xlYW4nLFxuXHRcdGRlZmF1bHQ6IGZhbHNlXG5cdH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlKCkge1xuXHR0aGlzLnN1YnNjcmlwdGlvbnMuZGlzcG9zZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG5cblx0dGhpcy5zdWJzY3JpcHRpb25zLmFkZChhdG9tLndvcmtzcGFjZS5vYnNlcnZlVGV4dEVkaXRvcnMoZWRpdG9yID0+IHtcblx0XHRlZGl0b3IuZ2V0QnVmZmVyKCkub25XaWxsU2F2ZShhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBpc0NTUyA9IFNVUFBPUlRFRF9TQ09QRVMuaGFzKGVkaXRvci5nZXRHcmFtbWFyKCkuc2NvcGVOYW1lKTtcblxuXHRcdFx0aWYgKGlzQ1NTICYmIGF0b20uY29uZmlnLmdldCgnYXV0b3ByZWZpeGVyLnJ1bk9uU2F2ZScpKSB7XG5cdFx0XHRcdGF3YWl0IGluaXQoZWRpdG9yLCB0cnVlLCAncHJlZml4Jyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pKTtcblxuXHR0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKGF0b20uY29tbWFuZHMuYWRkKCdhdG9tLXdvcmtzcGFjZScsICdhdXRvcHJlZml4ZXI6cHJlZml4JywgKCkgPT4ge1xuXHRcdGNvbnN0IGVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKTtcblxuXHRcdGlmIChlZGl0b3IpIHtcblx0XHRcdGluaXQoZWRpdG9yLCBmYWxzZSwgJ3ByZWZpeCcpO1xuXHRcdH1cblx0fSkpO1xuXG5cdHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoYXRvbS5jb21tYW5kcy5hZGQoJ2F0b20td29ya3NwYWNlJywgJ2F1dG9wcmVmaXhlcjpyZW1vdmUtcHJlZml4ZXMnLCAoKSA9PiB7XG5cdFx0Y29uc3QgZWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuXG5cdFx0aWYgKGVkaXRvcikge1xuXHRcdFx0aW5pdChlZGl0b3IsIGZhbHNlLCAncmVtb3ZlUHJlZml4ZXMnKTtcblx0XHR9XG5cdH0pKTtcbn1cbiJdfQ==