"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class TooltipOverride {
    constructor(resolveExpression) {
        this.resolveExpression = resolveExpression;
    }
    async tooltipHandler(editor, crange) {
        let range = crange;
        if (range.isEmpty()) {
            range = editor.bufferRangeForScopeAtPosition('identifier.haskell', range.start);
        }
        if (!range || range.isEmpty()) {
            return undefined;
        }
        const debugValue = await this.resolveExpression(editor.getTextInBufferRange(range));
        if (debugValue !== undefined) {
            return { range, text: debugValue };
        }
        return undefined;
    }
}
exports.TooltipOverride = TooltipOverride;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9vbHRpcE92ZXJyaWRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vbGliLXNyYy9Ub29sdGlwT3ZlcnJpZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFHQTtJQUNFLFlBQ1UsaUJBRXdCO1FBRnhCLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FFTztJQUMvQixDQUFDO0lBRUcsS0FBSyxDQUFDLGNBQWMsQ0FDekIsTUFBNEIsRUFDNUIsTUFBdUI7UUFFdkIsSUFBSSxLQUFLLEdBQWdDLE1BQU0sQ0FBQTtRQUMvQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLEtBQUssR0FBRyxNQUFNLENBQUMsNkJBQTZCLENBQzFDLG9CQUFvQixFQUNwQixLQUFLLENBQUMsS0FBSyxDQUNaLENBQUE7UUFDSCxDQUFDO1FBQ0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUMsU0FBUyxDQUFBO1FBQ2xCLENBQUM7UUFDRCxNQUFNLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FDN0MsTUFBTSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUNuQyxDQUFBO1FBQ0QsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDN0IsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQTtRQUNwQyxDQUFDO1FBQ0QsTUFBTSxDQUFDLFNBQVMsQ0FBQTtJQUNsQixDQUFDO0NBQ0Y7QUE3QkQsMENBNkJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXRvbVR5cGVzIGZyb20gJ2F0b20nXG5pbXBvcnQgKiBhcyBVUEkgZnJvbSAnYXRvbS1oYXNrZWxsLXVwaSdcblxuZXhwb3J0IGNsYXNzIFRvb2x0aXBPdmVycmlkZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVzb2x2ZUV4cHJlc3Npb246IChcbiAgICAgIGV4cHJlc3Npb246IHN0cmluZyxcbiAgICApID0+IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPixcbiAgKSB7fVxuXG4gIHB1YmxpYyBhc3luYyB0b29sdGlwSGFuZGxlcihcbiAgICBlZGl0b3I6IEF0b21UeXBlcy5UZXh0RWRpdG9yLFxuICAgIGNyYW5nZTogQXRvbVR5cGVzLlJhbmdlLFxuICApOiBQcm9taXNlPFVQSS5JVG9vbHRpcERhdGEgfCB1bmRlZmluZWQ+IHtcbiAgICBsZXQgcmFuZ2U6IEF0b21UeXBlcy5SYW5nZSB8IHVuZGVmaW5lZCA9IGNyYW5nZVxuICAgIGlmIChyYW5nZS5pc0VtcHR5KCkpIHtcbiAgICAgIHJhbmdlID0gZWRpdG9yLmJ1ZmZlclJhbmdlRm9yU2NvcGVBdFBvc2l0aW9uKFxuICAgICAgICAnaWRlbnRpZmllci5oYXNrZWxsJyxcbiAgICAgICAgcmFuZ2Uuc3RhcnQsXG4gICAgICApXG4gICAgfVxuICAgIGlmICghcmFuZ2UgfHwgcmFuZ2UuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IGRlYnVnVmFsdWUgPSBhd2FpdCB0aGlzLnJlc29sdmVFeHByZXNzaW9uKFxuICAgICAgZWRpdG9yLmdldFRleHRJbkJ1ZmZlclJhbmdlKHJhbmdlKSxcbiAgICApXG4gICAgaWYgKGRlYnVnVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHsgcmFuZ2UsIHRleHQ6IGRlYnVnVmFsdWUgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cbn1cbiJdfQ==