"use strict";var _globalThis = function (Object) {function get() {var _global = this || self;delete Object.prototype.__magic__;return _global;}if (typeof globalThis === "object") {return globalThis;}if (this) {return get();} else {Object.defineProperty(Object.prototype, "__magic__", { configurable: true, get: get });var _global = __magic__;return _global;}}(Object);var e = "undefined" != typeof _globalThis ? _globalThis : "undefined" != typeof self ? self : "undefined" != typeof window ? window : "undefined" != typeof global ? global : {},t = require("atom-package-deps").install,n = require("path"),i = require("url"),s = require("disposable-event"),r = require("assert"),o = require("electron").shell,l = require("atom"),a = l.CompositeDisposable,c = l.Emitter,u = l.Disposable,d = l.Range;Object.defineProperty(exports, "__esModule", { value: !0 });var h = function () {atom.config.get("linter-ui-default.useBusySignal") && atom.packages.getLoadedPackage("linter-ui-default").metadata["package-deps"].push("busy-signal");const e = window.requestIdleCallback(function () {Ks.delete(e), atom.inSpecMode() || t("linter-ui-default");});Ks.add(e);};exports.activate = h;var p = function () {Ks.forEach(e => window.cancelIdleCallback(e)), Ks.clear();for (const e of Ys) e.dispose();Ys.clear();};exports.deactivate = p;var f = function () {const e = new Gs.default();Ys.add(e), Xs && e.signal.attach(Xs);return e;};exports.provideUI = f;var g = function () {return Array.from(Ys).map(e => e.intentions);};exports.provideIntentions = g;var m = function (e) {Xs = e, Ys.forEach(function (e) {e.signal.attach(Xs);});};exports.consumeSignal = m;var v = function (e) {Js = e, Ys.forEach(function (e) {e.statusBar.attach(Js);});};exports.consumeStatusBar = v;var b = {};Object.defineProperty(b, "__esModule", { value: !0 });var k = void 0;b.default = k;var w = {};Object.defineProperty(w, "__esModule", { value: !0 });var y = void 0;w.default = y;var x = {};Object.defineProperty(x, "__esModule", { value: !0 });var _ = void 0;x.default = _;var S = {};Object.defineProperty(S, "__esModule", { value: !0 });var P = Z;S.$range = P;var C = G;S.$file = C;var E = function () {const e = getSelection();e && atom.clipboard.write(e.toString());};S.copySelection = E;var T = K;S.getPathOfMessage = T;var O = function () {let e = atom.workspace.getCenter().getActivePaneItem();const t = null !== e && atom.workspace.isTextEditor(e);!t && e && F && e.getURI && "atom://linter-ui-default" === e.getURI() && (!F.isAlive || F.isAlive()) ? e = F : F = e;return t ? e : null;};S.getActiveTextEditor = O;var M = function (e) {const t = new Map(),n = [];for (const s of e.editors) {var i;const e = null !== (i = s.textEditor.getPath()) && void 0 !== i ? i : "";t.has(e) ? t.get(e).editors.push(s) : (t.set(e, { added: [], removed: [], editors: [s] }), n.push(e));}return { editorsMap: t, filePaths: n };};S.getEditorsMap = M;var A = function (e, t, n = null) {const i = [];return e.forEach(function (e) {e && e.location && (null !== t && G(e) !== t || n && e.severity !== n || i.push(e));}), i;};S.filterMessages = A;var $ = function (e, t, n) {const i = [],s = "Point" === n.constructor.name ? new d(n, n) : d.fromObject(n);return e.forEach(function (e) {const n = G(e),r = Z(e);n && r && n === t && "function" == typeof r.intersectsWith && r.intersectsWith(s) && i.push(e);}), i;};S.filterMessagesByRangeOrPoint = $;var L = Y;S.openFile = L;var R = function (e, t = !1) {let n, i;if (t) {if (!e.reference || !e.reference.file) return void console.warn("[Linter-UI-Default] Message does not have a valid reference. Ignoring");n = e.reference.file, i = e.reference.position;} else {const t = Z(e);n = G(e), t && (i = t.start);}n && Y(n, i);};S.visitMessage = R;var z = function (e) {2 === e.version && e.url && o.openExternal(e.url);};S.openExternally = z;var I = function (e, t) {const n = t[0],i = "asc" === t[1] ? 1 : -1;return e.sort(function (e, t) {if ("severity" === n) {const n = q[e.severity],s = q[t.severity];if (n !== s) return i * (n > s ? 1 : -1);}if ("linterName" === n) {const n = e.severity.localeCompare(t.severity);if (0 !== n) return i * n;}if ("file" === n) {const n = K(e),s = n.length,r = K(t),o = r.length;if (s !== o) return i * (s > o ? 1 : -1);if (n !== r) return i * n.localeCompare(r);}if ("line" === n) {const n = Z(e),s = Z(t);if (n && !s) return 1;if (s && !n) return -1;if (n && s) {if (n.start.row !== s.start.row) return i * (n.start.row > s.start.row ? 1 : -1);if (n.start.column !== s.start.column) return i * (n.start.column > s.start.column ? 1 : -1);}}return 0;});};S.sortMessages = I;var D = function (e) {return e.sort(function (e, t) {return void 0 === e.priority || void 0 === t.priority ? 0 : t.priority - e.priority;});};S.sortSolutions = D;var j = function (e, t) {if ("apply" in t) return t.apply(), !0;const n = t.position,i = t.replaceWith;if ("currentText" in t) {const i = t.currentText,s = e.getTextInBufferRange(n);if (i !== s) return console.warn("[linter-ui-default] Not applying fix because text did not match the expected one", "expected", i, "but got", s), !1;}return e.setTextInBufferRange(n, i), !0;};S.applySolution = j;var N = function (e) {const t = e.getLineCount();if (e.largeFileMode || t >= X) return !0;const n = e.getBuffer();for (let e = 0, i = t; e < i; e++) if (n.lineLengthForRow(e) > J) return !0;return !1;};S.isLargeFile = N;var B = (U = void 0, H = S.severityScore = U, W = S.severityNames = H, V = S.WORKSPACE_URI = W, S.DOCK_ALLOWED_LOCATIONS = V);S.DOCK_DEFAULT_LOCATION = B;let F = null;const q = { error: 3, warning: 2, info: 1 };var U = q;S.severityScore = U;var H = { error: "Error", warning: "Warning", info: "Info" };S.severityNames = H;var W = "atom://linter-ui-default";S.WORKSPACE_URI = W;var V = ["center", "bottom"];S.DOCK_ALLOWED_LOCATIONS = V;function Z(e) {return e.location.position;}function G(e) {return e.location.file;}function K(e) {return atom.project.relativizePath(G(e) || "")[1];}function Y(e, t) {const n = { searchAllPanes: !0 };t && (n.initialLine = t.row, n.initialColumn = t.column), atom.workspace.open(e, n);}B = "bottom", S.DOCK_DEFAULT_LOCATION = B;const X = atom.config.get("linter-ui-default.largeFileLineCount"),J = atom.config.get("linter-ui-default.longLineLength");_ = class {constructor() {this.emitter = new c(), this.messages = [], this.filteredMessages = [], this.subscriptions = new a(), this.panelRepresents = void 0;let e = null;this.subscriptions.add(atom.config.observe("linter-ui-default.panelRepresents", e => {const t = void 0 !== this.panelRepresents;this.panelRepresents = e, t && this.update();}), atom.workspace.getCenter().observeActivePaneItem(() => {e && (e.dispose(), e = null);const t = (0, S.getActiveTextEditor)();if (t) {"Entire Project" !== this.panelRepresents && this.update();let n = -1;e = t.onDidChangeCursorPosition(({ newBufferPosition: e }) => {n !== e.row && "Current Line" === this.panelRepresents && (n = e.row, this.update());});}("Entire Project" !== this.panelRepresents || t) && this.update();}), new u(function () {e && e.dispose();}));}getFilteredMessages() {let e = [];if ("Entire Project" === this.panelRepresents) e = this.messages;else if ("Current File" === this.panelRepresents) {const t = (0, S.getActiveTextEditor)();if (!t) return [];e = (0, S.filterMessages)(this.messages, t.getPath());} else if ("Current Line" === this.panelRepresents) {const t = (0, S.getActiveTextEditor)();if (!t) return [];const n = t.getCursors()[0].getBufferRow();e = (0, S.filterMessagesByRangeOrPoint)(this.messages, t.getPath(), d.fromObject([[n, 0], [n, 1 / 0]]));}return e;}update(e = null) {Array.isArray(e) && (this.messages = e), this.filteredMessages = this.getFilteredMessages(), this.emitter.emit("observe-messages", this.filteredMessages);}onDidChangeMessages(e) {return this.emitter.on("observe-messages", e);}dispose() {this.subscriptions.dispose();}}, x.default = _;var Q = Ut(x = x.default),ee = {};Object.defineProperty(ee, "__esModule", { value: !0 });var te = void 0;ee.default = te;const ne = (e, t) => e === t;let ie = null,se = Re;const re = {},oe = { owned: null, cleanups: null, context: null, owner: null },[le, ae] = be(!1, !0);var ce = null,ue = null;let de,he = null,pe = null,fe = null,ge = null,me = 0;function ve(e, t) {t && (ce = t);const n = ue,i = ce,s = 0 === e.length ? oe : { owned: null, cleanups: null, context: null, owner: i, attached: !!t };let r;ce = s, ue = null;try {Le(() => r = e(() => je(s)), !0);} finally {ue = n, ce = i;}return r;}function be(e, t, n) {const i = { value: e, observers: null, observerSlots: null, pending: re, comparator: t ? "function" == typeof t ? t : ne : void 0 };return [Ee.bind(i), Te.bind(i)];}function ke(e, t) {Oe(Ae(e, t, !0));}function we(e, t) {Oe(Ae(e, t, !1));}function ye(e, t, n) {const i = Ae(e, t, !0);return i.pending = re, i.observers = null, i.observerSlots = null, i.state = 0, i.comparator = n ? "function" == typeof n ? n : ne : void 0, Oe(i), Ee.bind(i);}function xe(e) {if (he) return e();const t = he = [],n = e();return he = null, Le(() => {for (let e = 0; e < t.length; e += 1) {const n = t[e];if (n.pending !== re) {const e = n.pending;n.pending = re, Te.call(n, e);}}}, !1), n;}function _e(e) {let t,n = ue;return ue = null, t = e(), ue = n, t;}function Se(e) {!function (e, t) {if (_globalThis._$HYDRATION && _globalThis._$HYDRATION.asyncSSR) return;se = ze;const n = Ae(e, t, !1),i = de && Fe(ce, de.id);i && (n.suspense = i), n.user = !0, fe && fe.push(n);}(() => _e(e));}function Pe(e) {return null === ce || (null === ce.cleanups ? ce.cleanups = [e] : ce.cleanups.push(e)), e;}function Ce(e) {const t = Symbol("context");return { id: t, Provider: Ue(t), defaultValue: e };}function Ee() {if (this.state && this.sources) {const e = pe;pe = null, 1 === this.state ? Oe(this) : Ie(this), pe = e;}if (ue) {const e = this.observers ? this.observers.length : 0;ue.sources ? (ue.sources.push(this), ue.sourceSlots.push(e)) : (ue.sources = [this], ue.sourceSlots = [e]), this.observers ? (this.observers.push(ue), this.observerSlots.push(ue.sources.length - 1)) : (this.observers = [ue], this.observerSlots = [ue.sources.length - 1]);}return ge && ge.running && ge.sources.has(this) ? this.tValue : this.value;}function Te(e, t) {if (this.comparator) if (ge && ge.running && ge.sources.has(this)) {if (this.comparator(this.tValue, e)) return e;} else if (this.comparator(this.value, e)) return e;return he ? (this.pending === re && he.push(this), this.pending = e, e) : (ge ? ((ge.running || !t && ge.sources.has(this)) && (ge.sources.add(this), this.tValue = e), ge.running || (this.value = e)) : this.value = e, !this.observers || pe && !this.observers.length || Le(() => {for (let e = 0; e < this.observers.length; e += 1) {const t = this.observers[e];ge && ge.running && ge.disposed.has(t) || (t.observers && 2 !== t.state && De(t), t.state = 1, t.pure ? pe.push(t) : fe.push(t));}if (pe.length > 1e6) throw pe = [], new Error("Potential Infinite Loop Detected.");}, !1), e);}function Oe(e) {if (!e.fn) return;je(e);const t = ce,n = ue,i = me;ue = ce = e, Me(e, e.value, i), ge && !ge.running && ge.sources.has(e) && (ge.running = !0, Me(e, e.tValue, i), ge.running = !1), ue = n, ce = t;}function Me(e, t, n) {let i;try {i = e.fn(t);} catch (e) {Be(e);}(!e.updatedAt || e.updatedAt <= n) && (e.observers && e.observers.length ? Te.call(e, i, !0) : ge && ge.running && e.pure ? (ge.sources.add(e), e.tValue = i) : e.value = i, e.updatedAt = n);}function Ae(e, t, n) {const i = { fn: e, state: 1, updatedAt: null, owned: null, sources: null, sourceSlots: null, cleanups: null, value: t, owner: ce, context: null, pure: n };return null === ce || ce !== oe && (ge && ge.running && ce.pure ? ce.tOwned ? ce.tOwned.push(i) : ce.tOwned = [i] : ce.owned ? ce.owned.push(i) : ce.owned = [i]), i;}function $e(e) {let t,n = 1 === e.state && e;if (e.suspense && _e(e.suspense.inFallback)) return e.suspense.effects.push(e);const i = ge && ge.running;for (; (e.fn || i && e.attached) && (e = e.owner);) {if (i && ge.disposed.has(e)) return;2 === e.state ? t = e : 1 === e.state && (n = e, t = void 0);}if (t) {const s = pe;if (pe = null, Ie(t), pe = s, !n || 1 !== n.state) return;if (i) for (e = n; (e.fn || e.attached) && (e = e.owner);) if (ge.disposed.has(e)) return;}n && Oe(n);}function Le(e, t) {if (pe) return e();let n = !1;t || (pe = []), fe ? n = !0 : fe = [], me++;try {e();} catch (e) {Be(e);} finally {if (pe && (Re(pe), pe = null), n) return;if (ge && ge.running) {if (ge.promises.size) return ge.running = !1, ge.effects.push.apply(ge.effects, fe), fe = null, void ae(!0);const e = ge.sources;ge = null, xe(() => {e.forEach(e => {if (e.value = e.tValue, e.owned) for (let t = 0, n = e.owned.length; t < n; t++) je(e.owned[t]);e.tOwned && (e.owned = e.tOwned), delete e.tValue, delete e.tOwned;}), ae(!1);});}fe.length ? xe(() => {se(fe), fe = null;}) : fe = null;}}function Re(e) {for (let t = 0; t < e.length; t++) $e(e[t]);}function ze(e) {let t,n = 0;for (t = 0; t < e.length; t++) {const i = e[t];i.user ? e[n++] = i : $e(i);}const i = e.length;for (t = 0; t < n; t++) $e(e[t]);for (t = i; t < e.length; t++) $e(e[t]);}function Ie(e) {e.state = 0;for (let t = 0; t < e.sources.length; t += 1) {const n = e.sources[t];n.sources && (1 === n.state ? $e(n) : 2 === n.state && Ie(n));}}function De(e) {for (let t = 0; t < e.observers.length; t += 1) {const n = e.observers[t];n.state || (n.state = 2, n.observers && De(n));}}function je(e) {let t;if (e.sources) for (; e.sources.length;) {const t = e.sources.pop(),n = e.sourceSlots.pop(),i = t.observers;if (i && i.length) {const e = i.pop(),s = t.observerSlots.pop();n < i.length && (e.sourceSlots[s] = n, i[n] = e, t.observerSlots[n] = s);}}if (ge && ge.running && e.pure) {if (e.tOwned) {for (t = 0; t < e.tOwned.length; t++) je(e.tOwned[t]);delete e.tOwned;}Ne(e, !0);} else if (e.owned) {for (t = 0; t < e.owned.length; t++) je(e.owned[t]);e.owned = null;}if (e.cleanups) {for (t = 0; t < e.cleanups.length; t++) e.cleanups[t]();e.cleanups = null;}e.state = 0, e.context = null;}function Ne(e, t) {if (t || (e.state = 0, ge.disposed.add(e)), e.owned) for (let t = 0; t < e.owned.length; t++) Ne(e.owned[t]);}function Be(e) {const t = ie && Fe(ce, ie);if (!t) throw e;t.forEach(t => t(e));}function Fe(e, t) {return e && (e.context && e.context[t] || e.owner && Fe(e.owner, t));}function qe(e) {if ("function" == typeof e) return qe(e());if (Array.isArray(e)) {const t = [];for (let n = 0; n < e.length; n++) {let i = qe(e[n]);Array.isArray(i) ? t.push.apply(t, i) : t.push(i);}return t;}return e;}function Ue(e) {return function (t) {return ye(() => {ce.context = { [e]: t.value };const n = ye(() => t.children);return ye(() => qe(n()));});};}const He = Symbol("state-raw"),We = Symbol("state-node"),Ve = Symbol("state-proxy"),Ze = Symbol("state-name");function Ge(e, t, n, i) {let s = e[Ve];if (!s && (Object.defineProperty(e, Ve, { value: s = new Proxy(e, i || Qe) }), n)) {let t = Object.keys(e),n = Object.getOwnPropertyDescriptors(e);for (let i = 0, r = t.length; i < r; i++) {const r = t[i];if (n[r].get) {const t = ye(n[r].get.bind(s), void 0, !0);Object.defineProperty(e, r, { get: t });}if (n[r].set) {const t = n[r].set,i = e => xe(() => t.call(s, e));Object.defineProperty(e, r, { set: i });}}}return s;}function Ke(e) {return null != e && "object" == typeof e && (!e.__proto__ || e.__proto__ === Object.prototype || Array.isArray(e));}function Ye(e, t) {let n, i, s, r;if (n = null != e && e[He]) return n;if (!Ke(e)) return e;if (Array.isArray(e)) {Object.isFrozen(e) && (e = e.slice(0));for (let n = 0, r = e.length; n < r; n++) s = e[n], (i = Ye(s, t)) !== s && (e[n] = i);} else {Object.isFrozen(e) && (e = Object.assign({}, e));let n = Object.keys(e),o = t && Object.getOwnPropertyDescriptors(e);for (let l = 0, a = n.length; l < a; l++) r = n[l], t && o[r].get || (s = e[r], (i = Ye(s, t)) !== s && (e[r] = i));}return e;}function Xe(e) {let t = e[We];return t || Object.defineProperty(e, We, { value: t = {} }), t;}function Je(e, t) {const n = Reflect.getOwnPropertyDescriptor(e, t);return !n || n.get || t === Ve || t === We || t === Ze || (delete n.value, delete n.writable, n.get = () => e[t]), n;}const Qe = { get: function (e, t, n) {if (t === He) return e;if (t === Ve) return n;const i = e[t];if (t === We || "__proto__" === t) return i;const s = Ke(i);if (ue && ("function" != typeof i || e.hasOwnProperty(t))) {let n, r;s && (n = Xe(i)) && (r = n._ || (n._ = be()), r[0]()), n = Xe(e), r = n[t] || (n[t] = be()), r[0]();}return s ? Ge(i) : i;}, set: function () {return !0;}, deleteProperty: function () {return !0;}, getOwnPropertyDescriptor: Je };function et(e, t, n) {if (e[t] === n) return;const i = Array.isArray(e) || !(t in e);void 0 === n ? delete e[t] : e[t] = n;let s,r = Xe(e);(s = r[t]) && s[1](n), i && (s = r._) && s[1]();}function tt(e, t, n = []) {let i,s = e;if (t.length > 1) {i = t.shift();const r = typeof i,o = Array.isArray(e);if (Array.isArray(i)) {for (let s = 0; s < i.length; s++) tt(e, [i[s]].concat(t), [i[s]].concat(n));return;}if (o && "function" === r) {for (let s = 0; s < e.length; s++) i(e[s], s) && tt(e, [s].concat(t), [s].concat(n));return;}if (o && "object" === r) {const { from: s = 0, to: r = e.length - 1, by: o = 1 } = i;for (let i = s; i <= r; i += o) tt(e, [i].concat(t), [i].concat(n));return;}if (t.length > 1) return void tt(e[i], t, [i].concat(n));s = e[i], n = [i].concat(n);}let r = t[0];"function" == typeof r && (r = r(s, n), r === s) || void 0 === i && null == r || (r = Ye(r), void 0 === i || Ke(s) && Ke(r) && !Array.isArray(r) ? function (e, t) {const n = Object.keys(t);for (let i = 0; i < n.length; i += 1) {const s = n[i];et(e, s, t[s]);}}(s, r) : et(e, i, r));}function nt(e, t) {const n = Ye(e || {}, !0);return [Ge(n, 0, !0), function (...e) {xe(() => tt(n, e));}];}const it = Symbol("fallback");function st(e, t) {return _e(() => e(t));}function rt(e) {const t = "fallback" in e && { fallback: () => e.fallback };return ye(function (e, t, n = {}) {let i = [],s = [],r = [],o = 0,l = t.length > 1 ? [] : null,a = ce;return Pe(() => {for (let e = 0, t = r.length; e < t; e++) r[e]();}), () => {let c,u,d = e() || [];return _e(() => {let e,t,p,f,g,m,v,b,k,w = d.length;if (0 === w) {if (0 !== o) {for (c = 0; c < o; c++) r[c]();r = [], i = [], s = [], o = 0, l && (l = []);}n.fallback && (i = [it], s[0] = ve(e => (r[0] = e, n.fallback()), a), o = 1);} else if (0 === o) {for (u = 0; u < w; u++) i[u] = d[u], s[u] = ve(h, a);o = w;} else {for (p = new Array(w), f = new Array(w), l && (g = new Array(w)), m = 0, v = Math.min(o, w); m < v && i[m] === d[m]; m++);for (v = o - 1, b = w - 1; v >= m && b >= m && i[v] === d[b]; v--, b--) p[b] = s[v], f[b] = r[v], l && (g[b] = l[v]);for (e = new Map(), t = new Array(b + 1), u = b; u >= m; u--) k = d[u], c = e.get(k), t[u] = void 0 === c ? -1 : c, e.set(k, u);for (c = m; c <= v; c++) k = i[c], u = e.get(k), void 0 !== u && -1 !== u ? (p[u] = s[c], f[u] = r[c], l && (g[u] = l[c]), u = t[u], e.set(k, u)) : r[c]();for (u = m; u < w; u++) u in p ? (s[u] = p[u], r[u] = f[u], l && (l[u] = g[u], l[u](u))) : s[u] = ve(h, a);o = s.length = w, i = d.slice(0);}return s;});function h(e) {if (r[u] = e, l) {const [e, n] = be(u, !0);return l[u] = n, t(d[u], e);}return t(d[u]);}};}(() => e.each, e.children, t || void 0));}Ce();new Set(["className", "indeterminate", "value", "allowfullscreen", "allowpaymentrequest", "async", "autofocus", "autoplay", "checked", "controls", "default", "disabled", "formnovalidate", "hidden", "ismap", "itemscope", "loop", "multiple", "muted", "nomodule", "novalidate", "open", "playsinline", "readonly", "required", "reversed", "seamless", "selected", "truespeed"]), new Set(["innerHTML", "textContent", "innerText", "children"]), new Set(["abort", "animationstart", "animationend", "animationiteration", "blur", "change", "copy", "cut", "error", "focus", "gotpointercapture", "load", "loadend", "loadstart", "lostpointercapture", "mouseenter", "mouseleave", "paste", "pointerenter", "pointerleave", "progress", "reset", "scroll", "select", "submit", "toggle", "transitionstart", "transitioncancel", "transitionend", "transitionrun"]), new Set(["altGlyph", "altGlyphDef", "altGlyphItem", "animate", "animateColor", "animateMotion", "animateTransform", "circle", "clipPath", "color-profile", "cursor", "defs", "desc", "ellipse", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence", "filter", "font", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignObject", "g", "glyph", "glyphRef", "hkern", "image", "line", "linearGradient", "marker", "mask", "metadata", "missing-glyph", "mpath", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "set", "stop", "svg", "switch", "symbol", "text", "textPath", "tref", "tspan", "use", "view", "vkern"]);function ot(e, t) {return ye(e, void 0, t);}function lt(e, t, n) {let i = n.length,s = t.length,r = i,o = 0,l = 0,a = t[s - 1].nextSibling,c = null;for (; o < s || l < r;) if (s === o) {const t = r < i ? l ? n[l - 1].nextSibling : n[r - l] : a;for (; l < r;) e.insertBefore(n[l++], t);} else if (r === l) for (; o < s;) c && c.has(t[o]) || e.removeChild(t[o]), o++;else if (t[o] === n[l]) o++, l++;else if (t[s - 1] === n[r - 1]) s--, r--;else if (t[o] === n[r - 1] && n[l] === t[s - 1]) {const i = t[--s].nextSibling;e.insertBefore(n[l++], t[o++].nextSibling), e.insertBefore(n[--r], i), t[s] = n[r];} else {if (!c) {c = new Map();let e = l;for (; e < r;) c.set(n[e], e++);}const i = c.get(t[o]);if (null != i) {if (l < i && i < r) {let a,u = o,d = 1;for (; ++u < s && u < r && null != (a = c.get(t[u])) && a === i + d;) d++;if (d > i - l) {const s = t[o];for (; l < i;) e.insertBefore(n[l++], s);} else e.replaceChild(n[l++], t[o++]);} else o++;} else e.removeChild(t[o++]);}}const at = new Set();let ct = null;function ut(e, t, n) {let i;return ve(s => {i = s, gt(t, e(), t.firstChild ? null : void 0, n);}), () => {i(), t.textContent = "";};}function dt(e, t, n) {const i = document.createElement("template");if (i.innerHTML = e, t && i.innerHTML.split("<").length - 1 !== t) throw `Template html does not match input:\n${i.innerHTML}\n\n${e}`;let s = i.content.firstChild;return n && (s = s.firstChild), s;}function ht(e) {for (let t = 0, n = e.length; t < n; t++) {const n = e[t];at.has(n) || (at.add(n), document.addEventListener(n, mt));}}function pt(e, t, n) {!1 === n || null == n ? e.removeAttribute(t) : e.setAttribute(t, n);}function ft(e, t, n) {const i = e.style;if ("string" == typeof t) return i.cssText = t;let s, r;if (null != n && "string" != typeof n) {for (r in t) s = t[r], s !== n[r] && i.setProperty(r, s);for (r in n) null == t[r] && i.removeProperty(r);} else for (r in t) i.setProperty(r, t[r]);return t;}function gt(e, t, n, i) {if (void 0 === n || i || (i = []), "function" != typeof t) return vt(e, t, i, n);we(i => vt(e, t(), i, n), i);}function mt(e) {const t = `__${e.type}`;let n = e.composedPath && e.composedPath()[0] || e.target;for (e.target !== n && Object.defineProperty(e, "target", { configurable: !0, value: n }), Object.defineProperty(e, "currentTarget", { configurable: !0, get: function () {return n;} }); null !== n;) {const i = n[t];if (i) {const s = n[`${t}Data`];if (void 0 !== s ? i(s, e) : i(e), e.cancelBubble) return;}n = n.host && n.host !== n && n.host instanceof Node ? n.host : n.parentNode;}}function vt(e, t, n, i, s) {for (; "function" == typeof n;) n = n();if (t === n) return n;const r = typeof t,o = void 0 !== i;if (e = o && n[0] && n[0].parentNode || e, "string" === r || "number" === r) {if ("number" === r && (t = t.toString()), o) {let s = n[0];s && 3 === s.nodeType ? s.data = t : s = document.createTextNode(t), n = wt(e, n, i, s);} else n = "" !== n && "string" == typeof n ? e.firstChild.data = t : e.textContent = t;} else if (null == t || "boolean" === r) {if (ct && ct.context && ct.context.registry) return n;n = wt(e, n, i);} else {if ("function" === r) return we(() => {let s = t();for (; "function" == typeof s;) s = s();n = vt(e, s, n, i);}), () => n;if (Array.isArray(t)) {const r = [];if (bt(r, t, s)) return we(() => n = vt(e, r, n, i, !0)), () => n;if (ct && ct.context && ct.context.registry && n.length) return n;if (0 === r.length) {if (n = wt(e, n, i), o) return n;} else Array.isArray(n) ? 0 === n.length ? kt(e, r, i) : lt(e, n, r) : null == n || "" === n ? kt(e, r) : lt(e, o && n || [e.firstChild], r);n = r;} else if (t instanceof Node) {if (Array.isArray(n)) {if (o) return n = wt(e, n, i, t);wt(e, n, null, t);} else null != n && "" !== n && e.firstChild ? e.replaceChild(t, e.firstChild) : e.appendChild(t);n = t;} else console.warn("Skipped inserting", t);}return n;}function bt(e, t, n) {let i = !1;for (let s = 0, r = t.length; s < r; s++) {let r,o = t[s];if (o instanceof Node) e.push(o);else if (null == o || !0 === o || !1 === o) ;else if (Array.isArray(o)) i = bt(e, o) || i;else if ("string" == (r = typeof o)) e.push(document.createTextNode(o));else if ("function" === r) {if (n) {for (; "function" == typeof o;) o = o();i = bt(e, Array.isArray(o) ? o : [o]) || i;} else e.push(o), i = !0;} else e.push(document.createTextNode(o.toString()));}return i;}function kt(e, t, n) {for (let i = 0, s = t.length; i < s; i++) e.insertBefore(t[i], n);}function wt(e, t, n, i) {if (void 0 === n) return e.textContent = "";const s = i || document.createTextNode("");if (t.length) {let i = !1;for (let r = t.length - 1; r >= 0; r--) {const o = t[r];if (s !== o) {const t = o.parentNode === e;i || r ? t && e.removeChild(o) : t ? e.replaceChild(s, o) : e.insertBefore(s, n);} else i = !0;}} else e.insertBefore(s, n);return [s];}var yt = {},xt = dt;Object.defineProperty(yt, "__esModule", { value: !0 });var _t = function (e) {const [t, n] = be(e.delegate.filteredMessages);Se(() => {e.delegate.onDidChangeMessages(e => {n(e);});});const i = [{ id: "severity", label: "Severity" }, { id: "linterName", label: "Provider" }, { id: "excerpt", label: "Description", onClick: Bt, sortable: !1 }, { id: "line", label: "Line", onClick: Bt }];"Entire Project" === e.delegate.panelRepresents && i.push({ id: "file", label: "File", onClick: Bt });return (() => {const e = jt.cloneNode(!0);return pt(e, "tabindex", -1), e.style.setProperty("overflowY", "scroll"), e.style.setProperty("height", "100%"), gt(e, st(Ot, { get rows() {return t();}, columns: i, defaultSortDirection: ["line", "asc"], rowSorter: S.sortMessages, accessors: !0, getRowID: e => e.key, bodyRenderer: Nt, style: { width: "100%" }, className: "linter dark" })), e;})();};yt.PanelComponent = _t;const St = dt("<table><thead><tr></tr></thead><tbody></tbody></table>", 8),Pt = dt("<th></th>", 2),Ct = dt("<tr></tr>", 2),Et = dt("<td></td>", 2),Tt = dt('<span class="sort-icon"></span>', 2);function Ot(e) {var t;const [n, i] = be(),[s, r] = be(e.rows);function o() {const t = n();return void 0 !== t ? t : void 0 !== e.defaultSortDirection ? e.defaultSortDirection : [null, null];}ke(() => {r(e.rows);});const l = null !== (t = e.rowSorter) && void 0 !== t ? t : Dt;function a() {const t = o();null === t[0] && void 0 !== e.defaultSortDirection ? r(l(s(), e.defaultSortDirection)) : null !== t[0] && r(l(s(), t));}const { headerRenderer: c = Rt, bodyRenderer: u = zt, getRowID: d = It, accessors: h } = e;return void 0 === e.columns && (e.columns = function (e, t = 0) {const n = e[t],i = Object.keys(n),s = i.length,r = new Array(s);for (let e = 0; e < s; e++) r[e] = { id: i[e] };return r;}(e.rows, e.representitiveRowNumber)), a(), (() => {const t = St.cloneNode(!0),n = t.firstChild,r = n.firstChild,l = n.nextSibling;return gt(r, st(rt, { get each() {return e.columns;}, children: e => {const t = !1 !== e.sortable;return (() => {const n = Pt.cloneNode(!0);var s;return n.__click = t ? (s = e.id, e => {i(function (e, t, n) {const i = e[0],s = e[1];return n ? e = [null, null] : i === t ? e[1] = "asc" === s ? "desc" : "asc" : e = [t, "asc"], e;}(o(), s, e.shiftKey)), a();}) : void 0, n.className = t ? "sortable" : void 0, gt(n, () => c(e), null), gt(n, () => t ? function (e, t) {let n;return n = null === e[0] || e[0] !== t ? $t : "asc" === e[1] ? At : Mt, (() => {const e = Tt.cloneNode(!0);return gt(e, n), e;})();}(o(), e.id) : void 0, null), we(() => pt(n, "id", h ? String(e.id) : void 0)), n;})();} })), gt(l, st(rt, { get each() {return s();}, children: t => {const n = function (e) {return h ? d(e) : void 0;}(t);return (() => {const i = Ct.cloneNode(!0);return pt(i, "id", n), gt(i, st(rt, { get each() {return e.columns;}, children: e => (() => {const i = Et.cloneNode(!0);return i.__click = void 0 !== e.onClick ? n => e.onClick(n, t) : void 0, gt(i, () => u(t, e.id)), we(() => pt(i, "id", n ? `${n}.${e.id}` : void 0)), i;})() })), i;})();} })), we(n => {var i;const s = `solid-simple-table ${null !== (i = e.className) && void 0 !== i ? i : ""}`,r = e.style;return s !== n._v$ && (t.className = n._v$ = s), n._v$2 = ft(t, r, n._v$2), n;}, { _v$: void 0, _v$2: void 0 }), t;})();}const Mt = "↑",At = "↓",$t = "⇅";function Lt(e) {return "string" == typeof e ? e : JSON.stringify(e);}function Rt(e) {var t;return null !== (t = e.label) && void 0 !== t ? t : e.id;}function zt(e, t) {return Lt("object" == typeof e ? e[t] : e);}function It(e) {return Lt(e);}function Dt(e, t) {if (!e.length) return e;const n = t[0];return e = "object" == typeof e[0] ? e.sort((e, t) => {const i = e[n],s = t[n];return i == s ? 0 : i < s ? -1 : 1;}) : e.sort(), "desc" === t[1] ? e.reverse() : e;}ht(["click"]);const jt = xt('<div id="linter-panel"></div>', 2);function Nt(e, t) {const n = (0, S.$range)(e);switch (t) {case "file":return (0, S.getPathOfMessage)(e);case "line":return n ? `${n.start.row + 1}:${n.start.column + 1}` : "";case "excerpt":return e.excerpt;case "severity":return S.severityNames[e.severity];default:return e[t];}}function Bt(e, t) {"A" !== e.target.tagName && (("darwin" === process.platform ? e.metaKey : e.ctrlKey) ? e.shiftKey ? (0, S.openExternally)(t) : (0, S.visitMessage)(t, !0) : (0, S.visitMessage)(t));}function Ft(e) {const t = atom.workspace.paneContainerForItem(e);return t && "object" == typeof t.state && "number" == typeof t.state.size && "function" == typeof t.render ? t : null;}te = class {constructor(e) {this.element = document.createElement("div"), this.subscriptions = new a(), this.panelHeight = 100, this.alwaysTakeMinimumSpace = !0, this.lastSetPaneHeight = void 0, this.subscriptions.add(atom.config.observe("linter-ui-default.panelHeight", e => {const t = "number" == typeof this.panelHeight;this.panelHeight = e, t && this.doPanelResize(!0);}), atom.config.observe("linter-ui-default.alwaysTakeMinimumSpace", e => {this.alwaysTakeMinimumSpace = e;})), this.doPanelResize(), ut(() => st(yt.PanelComponent, { delegate: e }), this.element);}doPanelResize(e = !1) {const t = Ft(this);if (null === t) return;let n = null;const i = atom.views.getView(t);if (i && this.alwaysTakeMinimumSpace) {const e = i.querySelector(".list-inline.tab-bar.inset-panel"),t = e ? e.getClientRects()[0] : null,s = this.element.querySelector("table"),r = s ? s.getClientRects()[0] : null;t && r && (n = t.height + r.height + 1);}let s = null;const r = null === n || e ? this.panelHeight : Math.min(n, this.panelHeight);null === this.lastSetPaneHeight || t.state.size === this.lastSetPaneHeight || e || (s = t.state.size), this.lastSetPaneHeight = r, t.state.size = r, t.render(t.state), null !== s && atom.config.set("linter-ui-default.panelHeight", s);}getURI() {return S.WORKSPACE_URI;}getTitle() {return "Linter";}getDefaultLocation() {return S.DOCK_DEFAULT_LOCATION;}getAllowedLocations() {return S.DOCK_ALLOWED_LOCATIONS;}getPreferredHeight() {return atom.config.get("linter-ui-default.panelHeight");}dispose() {this.subscriptions.dispose();const e = Ft(this);var t;null === e || this.alwaysTakeMinimumSpace || e.state.size === this.panelHeight || (atom.config.set("linter-ui-default.panelHeight", e.state.size), null === (t = e.paneForItem(this)) || void 0 === t || t.destroyItem(this, !0));}}, ee.default = te;var qt = Ut(ee = ee.default);function Ut(e) {return e && e.__esModule ? e : { default: e };}y = class {constructor() {this.panel = null, this.element = document.createElement("div"), this.delegate = new Q.default(), this.messages = [], this.deactivating = !1, this.subscriptions = new a(), this.showPanelConfig = !0, this.hidePanelWhenEmpty = !0, this.showPanelStateMessages = !1, this.activationTimer = void 0, this.subscriptions.add(this.delegate, atom.config.observe("linter-ui-default.hidePanelWhenEmpty", e => {this.hidePanelWhenEmpty = e, this.refresh();}), atom.workspace.onDidDestroyPane(({ pane: e }) => {(null === this.panel || e.getItems().includes(this.panel)) && !this.deactivating && (this.panel = null, atom.config.set("linter-ui-default.showPanel", !1));}), atom.workspace.onDidDestroyPaneItem(({ item: e }) => {e instanceof qt.default && !this.deactivating && (this.panel = null, atom.config.set("linter-ui-default.showPanel", !1));}), atom.config.observe("linter-ui-default.showPanel", e => {this.showPanelConfig = e, this.refresh();}), atom.workspace.getCenter().observeActivePaneItem(() => {this.showPanelStateMessages = !!this.delegate.filteredMessages.length, this.refresh();})), this.activationTimer = window.requestIdleCallback(() => {let e = !0;const t = atom.workspace.getBottomDock();this.subscriptions.add(t.onDidChangeActivePaneItem(t => {if (!this.panel || "bottom" !== this.getPanelLocation()) return;if (e) return void (e = !1);t === this.panel !== this.showPanelConfig && atom.config.set("linter-ui-default.showPanel", !this.showPanelConfig);}), t.onDidChangeVisible(e => {if (!this.panel || "bottom" !== this.getPanelLocation()) return;if (!e && this.showPanelConfig && this.hidePanelWhenEmpty && !this.showPanelStateMessages) return;if (t.getActivePaneItem() !== this.panel) return;e !== this.showPanelConfig && atom.config.set("linter-ui-default.showPanel", !this.showPanelConfig);})), this.activate();});}getPanelLocation() {if (!this.panel) return null;const e = atom.workspace.paneContainerForItem(this.panel);return e && e.location || null;}async activate() {this.panel || (this.panel = new qt.default(this.delegate), await atom.workspace.open(this.panel, { activatePane: !1, activateItem: !1, searchAllPanes: !0 }), this.update(), this.refresh());}update(e = null) {e && (this.messages = e), this.delegate.update(this.messages), this.showPanelStateMessages = !!this.delegate.filteredMessages.length, this.refresh();}async refresh() {const e = this.panel;if (null === e) return void (this.showPanelConfig && (await this.activate()));const t = atom.workspace.paneContainerForItem(e);if (!t || "bottom" !== t.location) return;const n = t.getActivePaneItem() === e,i = this.showPanelConfig,s = !this.hidePanelWhenEmpty || this.showPanelStateMessages;if (i && s) {var r;if (!n) null === (r = t.paneForItem(e)) || void 0 === r || r.activateItem(e);t.show(), e.doPanelResize();} else n && t.hide();}dispose() {this.deactivating = !0, this.panel && this.panel.dispose(), this.subscriptions.dispose(), window.cancelIdleCallback(this.activationTimer);}}, w.default = y;var Ht = Zs(w = w.default),Wt = {};Object.defineProperty(Wt, "__esModule", { value: !0 });var Vt = void 0;Wt.default = Vt;var Zt,Gt = (Zt = r) && Zt.__esModule ? Zt : { default: Zt };Vt = class {constructor() {this.messages = [], this.subscriptions = new a(), this.subscriptions.add(atom.commands.add("atom-workspace", { "linter-ui-default:next": () => this.move(!0, !0), "linter-ui-default:previous": () => this.move(!1, !0), "linter-ui-default:next-error": () => this.move(!0, !0, "error"), "linter-ui-default:previous-error": () => this.move(!1, !0, "error"), "linter-ui-default:next-warning": () => this.move(!0, !0, "warning"), "linter-ui-default:previous-warning": () => this.move(!1, !0, "warning"), "linter-ui-default:next-info": () => this.move(!0, !0, "info"), "linter-ui-default:previous-info": () => this.move(!1, !0, "info"), "linter-ui-default:next-in-current-file": () => this.move(!0, !1), "linter-ui-default:previous-in-current-file": () => this.move(!1, !1), "linter-ui-default:next-error-in-current-file": () => this.move(!0, !1, "error"), "linter-ui-default:previous-error-in-current-file": () => this.move(!1, !1, "error"), "linter-ui-default:next-warning-in-current-file": () => this.move(!0, !1, "warning"), "linter-ui-default:previous-warning-in-current-file": () => this.move(!1, !1, "warning"), "linter-ui-default:next-info-in-current-file": () => this.move(!0, !1, "info"), "linter-ui-default:previous-info-in-current-file": () => this.move(!1, !1, "info"), "linter-ui-default:toggle-panel": () => this.togglePanel(), "linter-ui-default:expand-tooltip": function () {}, "linter-ui-default:collapse-tooltip": function () {} }), atom.commands.add("atom-text-editor:not([mini])", { "linter-ui-default:apply-all-solutions": () => this.applyAllSolutions() }), atom.commands.add("#linter-panel", { "core:copy": () => {const e = document.getSelection();e && atom.clipboard.write(e.toString());} }));}togglePanel() {atom.config.set("linter-ui-default.showPanel", !atom.config.get("linter-ui-default.showPanel"));}applyAllSolutions() {const e = (0, S.getActiveTextEditor)();(0, Gt.default)(e, "textEditor was null on a command supposed to run on text-editors only");(0, S.sortMessages)((0, S.filterMessages)(this.messages, e.getPath()), ["line", "desc"]).forEach(function (t) {2 === t.version && t.solutions && t.solutions.length && (0, S.applySolution)(e, (0, S.sortSolutions)(t.solutions)[0]);});}move(e, t, n = null) {const i = (0, S.getActiveTextEditor)(),s = i && i.getPath() || NaN,r = (0, S.sortMessages)((0, S.filterMessages)(this.messages, t ? null : s, n), ["file", "asc"]),o = e ? -1 : 1;if (!i) {const t = e ? r[0] : r[r.length - 1];return void (t && (0, S.visitMessage)(t));}const l = i.getCursorBufferPosition();e || r.reverse();let a = null,c = !1;for (let e = 0, t = r.length; e < t; e++) {const t = r[e],n = (0, S.$file)(t),i = (0, S.$range)(t);if (c || n !== s || (c = !0), n && i) {if (c && n !== s) {a = t;break;}if (n === s && l.compare(i.start) === o) {a = t;break;}}}!a && r.length && (a = r[0]), a && (0, S.visitMessage)(a);}update(e) {this.messages = e;}dispose() {this.subscriptions.dispose();}}, Wt.default = Vt;var Kt = Zs(Wt = Wt.default),Yt = {};Object.defineProperty(Yt, "__esModule", { value: !0 });var Xt = void 0;Yt.default = Xt;var Jt = {};Object.defineProperty(Jt, "__esModule", { value: !0 });var Qt = void 0;Jt.default = Qt;var en = {};Object.defineProperty(en, "__esModule", { value: !0 });var tn = function (e) {const t = document.createElement("a");return t.classList.add(`icon-${e}`), t.appendChild(document.createTextNode("")), t;};en.getElement = tn;var nn = function (e) {if (e && e.__esModule) return e;if (null === e || "object" != typeof e && "function" != typeof e) return { default: e };var t = sn();if (t && t.has(e)) return t.get(e);var n = {},i = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var s in e) if (Object.prototype.hasOwnProperty.call(e, s)) {var r = i ? Object.getOwnPropertyDescriptor(e, s) : null;r && (r.get || r.set) ? Object.defineProperty(n, s, r) : n[s] = e[s];}n.default = e, t && t.set(e, n);return n;}(en);function sn() {if ("function" != typeof WeakMap) return null;var e = new WeakMap();return sn = function () {return e;}, e;}Qt = class {constructor() {this.item = document.createElement("div"), this.itemErrors = nn.getElement("stop"), this.itemWarnings = nn.getElement("alert"), this.itemInfos = nn.getElement("info"), this.emitter = new c(), this.subscriptions = new a(), this.item.appendChild(this.itemErrors), this.item.appendChild(this.itemWarnings), this.item.appendChild(this.itemInfos), this.item.classList.add("inline-block"), this.item.classList.add("linter-status-count"), this.subscriptions.add(this.emitter, atom.tooltips.add(this.itemErrors, { title: "Linter Errors" }), atom.tooltips.add(this.itemWarnings, { title: "Linter Warnings" }), atom.tooltips.add(this.itemInfos, { title: "Linter Infos" })), this.itemErrors.onclick = () => this.emitter.emit("click", "error"), this.itemWarnings.onclick = () => this.emitter.emit("click", "warning"), this.itemInfos.onclick = () => this.emitter.emit("click", "info"), this.update(0, 0, 0);}setVisibility(e, t) {t ? this.item.classList.remove(`hide-${e}`) : this.item.classList.add(`hide-${e}`);}update(e, t, n) {this.itemErrors.childNodes[0].textContent = String(e), this.itemWarnings.childNodes[0].textContent = String(t), this.itemInfos.childNodes[0].textContent = String(n), e ? this.itemErrors.classList.add("text-error") : this.itemErrors.classList.remove("text-error"), t ? this.itemWarnings.classList.add("text-warning") : this.itemWarnings.classList.remove("text-warning"), n ? this.itemInfos.classList.add("text-info") : this.itemInfos.classList.remove("text-info");}onDidClick(e) {return this.emitter.on("click", e);}dispose() {this.subscriptions.dispose();}}, Jt.default = Qt;var rn = function (e) {return e && e.__esModule ? e : { default: e };}(Jt = Jt.default);Xt = class {constructor() {this.element = new rn.default(), this.messages = [], this.subscriptions = new a(), this.statusBarRepresents = void 0, this.statusBarClickBehavior = void 0, this.subscriptions.add(this.element, atom.config.observe("linter-ui-default.statusBarRepresents", e => {const t = void 0 !== this.statusBarRepresents;this.statusBarRepresents = e, t && this.update();}), atom.config.observe("linter-ui-default.statusBarClickBehavior", e => {const t = void 0 !== this.statusBarClickBehavior;this.statusBarClickBehavior = e, t && this.update();}), atom.config.observe("linter-ui-default.showStatusBar", e => {this.element.setVisibility("config", e);}), atom.workspace.getCenter().observeActivePaneItem(e => {const t = atom.workspace.isTextEditor(e);this.element.setVisibility("pane", t), t && "Current File" === this.statusBarRepresents && this.update();})), this.element.onDidClick(e => {const t = atom.views.getView(atom.workspace);if ("Toggle Panel" === this.statusBarClickBehavior) atom.commands.dispatch(t, "linter-ui-default:toggle-panel");else if ("Toggle Status Bar Scope" === this.statusBarClickBehavior) atom.config.set("linter-ui-default.statusBarRepresents", "Entire Project" === this.statusBarRepresents ? "Current File" : "Entire Project");else {const n = "Current File" === this.statusBarRepresents ? "-in-current-file" : "";atom.commands.dispatch(t, `linter-ui-default:next-${e}${n}`);}});}update(e = null) {e ? this.messages = e : e = this.messages;const t = { error: 0, warning: 0, info: 0 },n = (0, S.getActiveTextEditor)(),i = n && n.getPath() || NaN;e.forEach(e => {"Entire Project" !== this.statusBarRepresents && (0, S.$file)(e) !== i || ("error" === e.severity ? t.error++ : "warning" === e.severity ? t.warning++ : t.info++);}), this.element.update(t.error, t.warning, t.info);}attach(e) {let t = null;this.subscriptions.add(atom.config.observe("linter-ui-default.statusBarPosition", n => {t && t.destroy(), t = e[`add${n}Tile`]({ item: this.element.item, priority: "Left" === n ? 0 : 1e3 });})), this.subscriptions.add(new u(function () {t && t.destroy();}));}dispose() {this.subscriptions.dispose();}}, Yt.default = Xt;var on = Zs(Yt = Yt.default),ln = {};Object.defineProperty(ln, "__esModule", { value: !0 });var an = void 0;ln.default = an;an = class {constructor() {this.provider = void 0, this.executing = new Set(), this.providerTitles = new Set(), this.useBusySignal = !0, this.subscriptions = new a(), this.subscriptions.add(atom.config.observe("linter-ui-default.useBusySignal", e => {this.useBusySignal = e;}));}attach(e) {this.provider = e.create(), this.update();}update() {const e = this.provider;if (!e) return;if (!this.useBusySignal) return;const t = new Map(),n = new Set();for (const { filePath: e, linter: n } of this.executing) {let i = t.get(e);i || t.set(e, i = []), i.push(n.name);}for (const [i, s] of t) {const t = i ? ` on ${atom.project.relativizePath(i)[1]}` : "";s.forEach(i => {const s = `${i}${t}`;n.add(s), this.providerTitles.has(s) || (this.providerTitles.add(s), e.add(s));});}this.providerTitles.forEach(t => {n.has(t) || (e.remove(t), this.providerTitles.delete(t));}), t.clear();}getExecuting(e, t) {for (const n of this.executing) if (n.linter === e && n.filePath === t) return n;return null;}didBeginLinting(e, t) {this.getExecuting(e, t) || (this.executing.add({ linter: e, filePath: t }), this.update());}didFinishLinting(e, t) {const n = this.getExecuting(e, t);n && (this.executing.delete(n), this.update());}dispose() {this.provider && this.provider.clear(), this.providerTitles.clear(), this.executing.clear(), this.subscriptions.dispose();}}, ln.default = an;var cn = Zs(ln = ln.default),un = {};Object.defineProperty(un, "__esModule", { value: !0 });var dn = void 0;un.default = dn;dn = class {constructor() {this.messages = [], this.grammarScopes = ["*"];}getIntentions({ textEditor: e, bufferPosition: t }) {let n = [];const i = (0, S.filterMessages)(this.messages, e.getPath());for (const s of i) {if (!(s.solutions && s.solutions.length)) continue;const i = (0, S.$range)(s);if (!(i && i.containsPoint(t))) continue;let r = [];2 === s.version && s.solutions && s.solutions.length && (r = s.solutions);const o = s.linterName || "Linter";n = n.concat(r.map(t => ({ priority: t.priority ? t.priority + 200 : 200, icon: "tools", title: t.title || `Fix ${o} issue`, selected: function () {(0, S.applySolution)(e, t);} })));}return n;}update(e) {this.messages = e;}}, un.default = dn;var hn = Zs(un = un.default),pn = {};Object.defineProperty(pn, "__esModule", { value: !0 });var fn = void 0;pn.default = fn;var gn = {};Object.defineProperty(gn, "__esModule", { value: !0 });var mn = void 0;gn.default = mn;var vn, bn;bn = function (e) {var t = typeof e;return null != e && ("object" == t || "function" == t);};var kn,wn = {},yn = "object" == typeof e && e && e.Object === Object && e,xn = "object" == typeof self && self && self.Object === Object && self,_n = yn || xn || Function("return this")();kn = function () {return wn.Date.now();};var Sn,Pn,Cn = Sn = (wn = _n).Symbol,En = Object.prototype,Tn = En.hasOwnProperty,On = En.toString,Mn = Cn ? Cn.toStringTag : void 0;Pn = function (e) {var t = Tn.call(e, Mn),n = e[Mn];try {e[Mn] = void 0;var i = !0;} catch (e) {}var s = On.call(e);return i && (t ? e[Mn] = n : delete e[Mn]), s;};var An = Object.prototype.toString;var $n = Pn,Ln = function (e) {return An.call(e);},Rn = Sn ? Sn.toStringTag : void 0;var zn = function (e) {return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : Rn && Rn in Object(e) ? $n(e) : Ln(e);},In = function (e) {return null != e && "object" == typeof e;};var Dn = bn,jn = function (e) {return "symbol" == typeof e || In(e) && "[object Symbol]" == zn(e);},Nn = /^\s+|\s+$/g,Bn = /^[-+]0x[0-9a-f]+$/i,Fn = /^0b[01]+$/i,qn = /^0o[0-7]+$/i,Un = parseInt;var Hn = bn,Wn = kn,Vn = function (e) {if ("number" == typeof e) return e;if (jn(e)) return NaN;if (Dn(e)) {var t = "function" == typeof e.valueOf ? e.valueOf() : e;e = Dn(t) ? t + "" : t;}if ("string" != typeof e) return 0 === e ? e : +e;e = e.replace(Nn, "");var n = Fn.test(e);return n || qn.test(e) ? Un(e.slice(2), n ? 2 : 8) : Bn.test(e) ? NaN : +e;},Zn = Math.max,Gn = Math.min;var Kn = Ts(vn = function (e, t, n) {var i,s,r,o,l,a,c = 0,u = !1,d = !1,h = !0;if ("function" != typeof e) throw new TypeError("Expected a function");function p(t) {var n = i,r = s;return i = s = void 0, c = t, o = e.apply(r, n);}function f(e) {return c = e, l = setTimeout(m, t), u ? p(e) : o;}function g(e) {var n = e - a;return void 0 === a || n >= t || n < 0 || d && e - c >= r;}function m() {var e = Wn();if (g(e)) return v(e);l = setTimeout(m, function (e) {var n = t - (e - a);return d ? Gn(n, r - (e - c)) : n;}(e));}function v(e) {return l = void 0, h && i ? p(e) : (i = s = void 0, o);}function b() {var e = Wn(),n = g(e);if (i = arguments, s = this, a = e, n) {if (void 0 === l) return f(a);if (d) return clearTimeout(l), l = setTimeout(m, t), p(a);}return void 0 === l && (l = setTimeout(m, t)), o;}return t = Vn(t) || 0, Hn(n) && (u = !!n.leading, r = (d = "maxWait" in n) ? Zn(Vn(n.maxWait) || 0, t) : r, h = "trailing" in n ? !!n.trailing : h), b.cancel = function () {void 0 !== l && clearTimeout(l), c = 0, i = a = s = l = void 0;}, b.flush = function () {return void 0 === l ? o : v(Wn());}, b;}),Yn = Ts(s),Xn = {},Jn = dt;Object.defineProperty(Xn, "__esModule", { value: !0 });var Qn = void 0;Xn.default = Qn;var ei = {};Object.defineProperty(ei, "__esModule", { value: !0 });var ti = void 0;ei.default = ti;ti = class {constructor() {this.emitter = new c(), this.expanded = !1, this.subscriptions = new a(), this.showProviderName = void 0, this.subscriptions.add(this.emitter, atom.config.observe("linter-ui-default.showProviderName", e => {const t = void 0 !== this.showProviderName;this.showProviderName = e, t && this.emitter.emit("should-update");}), atom.commands.add("atom-workspace", { "linter-ui-default:expand-tooltip": e => {var t;this.expanded || (this.expanded = !0, this.emitter.emit("should-expand"), null != e && null !== (t = e.originalEvent) && void 0 !== t && t.isTrusted && document.body.addEventListener("keyup", function e() {document.body.removeEventListener("keyup", e), atom.commands.dispatch(atom.views.getView(atom.workspace), "linter-ui-default:collapse-tooltip");}, { passive: !0 }));}, "linter-ui-default:collapse-tooltip": () => {this.expanded = !1, this.emitter.emit("should-collapse");} }));}onShouldUpdate(e) {return this.emitter.on("should-update", e);}onShouldExpand(e) {return this.emitter.on("should-expand", e);}onShouldCollapse(e) {return this.emitter.on("should-collapse", e);}dispose() {this.emitter.dispose();}}, ei.default = ti;var ni = xs(ei = ei.default),ii = {},si = dt,ri = ht;Object.defineProperty(ii, "__esModule", { value: !0 });var oi = function (e) {const [t, n] = nt({ description: "", descriptionShow: !1 }),[i, s] = be(!1);async function r(o = null) {const l = !t.descriptionShow,a = t.description || e.message.description;if (l || o) {if ("string" == typeof a || o) {const e = (0, Yi.default)(o || a);n({ description: e, descriptionShow: !0 });} else if ("function" == typeof a) {if (n({ ...t, descriptionShow: !0 }), i()) return;s(!0);const e = await a();if ("string" != typeof e) throw new Error("Expected result to be string, got: " + typeof e);try {await r(e);} catch (e) {console.log("[Linter] Error getting descriptions", e), s(!1), t.descriptionShow && (await r());}} else console.error("[Linter] Invalid description detected, expected string or function but got:", typeof a);} else n({ ...t, descriptionShow: !1 });}Se(() => {e.delegate.onShouldUpdate(() => {n({ description: "", descriptionShow: !1 });}), e.delegate.onShouldExpand(async () => {t.descriptionShow || (await r());}), e.delegate.onShouldCollapse(async () => {t.descriptionShow && (await r());});});const { message: o, delegate: l } = e;return (() => {const n = ns.cloneNode(!0),i = n.firstChild,s = i.firstChild,a = s.firstChild,c = s.nextSibling;return n.__click = as, gt(i, (() => {const e = ot(() => !!o.description, !0);return () => e() && (() => {const e = is.cloneNode(!0),n = e.firstChild;return e.__click = async () => await r(), we(() => n.className = "icon linter-icon icon-" + (t.descriptionShow ? "chevron-down" : "chevron-right")), e;})();})(), s), gt(i, (() => {const t = ot(() => !!function (e) {if (2 === e.version && e.solutions && e.solutions.length) return !0;return !1;}(o), !0);return () => t() && st(Xi.FixButton, { onClick: () => function () {const t = e.message,n = (0, S.getActiveTextEditor)();null !== n && 2 === t.version && t.solutions && t.solutions.length && (0, S.applySolution)(n, (0, S.sortSolutions)(t.solutions)[0]);}() });})(), s), gt(a, () => l.showProviderName ? `${o.linterName}: ` : ""), gt(s, () => o.excerpt, null), gt(c, (() => {const e = ot(() => !(!o.reference || !o.reference.file), !0);return () => e() && (() => {const e = ss.cloneNode(!0);return e.__click = () => (0, S.visitMessage)(o, !0), e;})();})(), null), gt(c, (() => {const e = ot(() => !!o.url, !0);return () => e() && (() => {const e = rs.cloneNode(!0);return e.__click = () => (0, S.openExternally)(o), e;})();})(), null), gt(n, (() => {const e = ot(() => !!t.descriptionShow, !0);return () => e() && (() => {const e = os.cloneNode(!0);return we(() => e.innerHTML = t.description || "Loading..."), e;})();})(), null), we(() => i.className = `linter-excerpt ${o.severity}`), n;})();};ii.default = oi;var li,ai,ci = function (e) {if (e && e.__esModule) return e;if (null === e || "object" != typeof e && "function" != typeof e) return { default: e };var t = ls();if (t && t.has(e)) return t.get(e);var n = {},i = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var s in e) if (Object.prototype.hasOwnProperty.call(e, s)) {var r = i ? Object.getOwnPropertyDescriptor(e, s) : null;r && (r.get || r.set) ? Object.defineProperty(n, s, r) : n[s] = e[s];}n.default = e, t && t.set(e, n);return n;}(i),ui = {};function di() {return { baseUrl: null, breaks: !1, gfm: !0, headerIds: !0, headerPrefix: "", highlight: null, langPrefix: "language-", mangle: !0, pedantic: !1, renderer: null, sanitize: !1, sanitizer: null, silent: !1, smartLists: !1, smartypants: !1, tokenizer: null, walkTokens: null, xhtml: !1 };}ui = { defaults: { baseUrl: null, breaks: !1, gfm: !0, headerIds: !0, headerPrefix: "", highlight: null, langPrefix: "language-", mangle: !0, pedantic: !1, renderer: null, sanitize: !1, sanitizer: null, silent: !1, smartLists: !1, smartypants: !1, tokenizer: null, walkTokens: null, xhtml: !1 }, getDefaults: di, changeDefaults: function (e) {ai = e, ui.defaults = ai;} };var hi = {};const pi = /[&<>"']/,fi = /[&<>"']/g,gi = /[<>"']|&(?!#?\w+;)/,mi = /[<>"']|&(?!#?\w+;)/g,vi = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" },bi = e => vi[e];const ki = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function wi(e) {return e.replace(ki, (e, t) => "colon" === (t = t.toLowerCase()) ? ":" : "#" === t.charAt(0) ? "x" === t.charAt(1) ? String.fromCharCode(parseInt(t.substring(2), 16)) : String.fromCharCode(+t.substring(1)) : "");}const yi = /(^|[^\[])\^/g;const xi = /[^\w:]/g,_i = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const Si = {},Pi = /^[^:]+:\/*[^/]*$/,Ci = /^([^:]+:)[\s\S]*$/,Ei = /^([^:]+:\/*[^/]*)[\s\S]*$/;function Ti(e, t) {Si[" " + e] || (Pi.test(e) ? Si[" " + e] = e + "/" : Si[" " + e] = Oi(e, "/", !0));const n = -1 === (e = Si[" " + e]).indexOf(":");return "//" === t.substring(0, 2) ? n ? t : e.replace(Ci, "$1") + t : "/" === t.charAt(0) ? n ? t : e.replace(Ei, "$1") + t : e + t;}function Oi(e, t, n) {const i = e.length;if (0 === i) return "";let s = 0;for (; s < i;) {const r = e.charAt(i - s - 1);if (r !== t || n) {if (r === t || !n) break;s++;} else s++;}return e.substr(0, i - s);}function Mi(e, t, n) {const i = t.href,s = t.title ? hi.escape(t.title) : null,r = e[1].replace(/\\([\[\]])/g, "$1");return "!" !== e[0].charAt(0) ? { type: "link", raw: n, href: i, title: s, text: r } : { type: "image", raw: n, href: i, title: s, text: hi.escape(r) };}hi = { escape: function (e, t) {if (t) {if (pi.test(e)) return e.replace(fi, bi);} else if (gi.test(e)) return e.replace(mi, bi);return e;}, unescape: wi, edit: function (e, t) {e = e.source || e, t = t || "";const n = { replace: (t, i) => (i = (i = i.source || i).replace(yi, "$1"), e = e.replace(t, i), n), getRegex: () => new RegExp(e, t) };return n;}, cleanUrl: function (e, t, n) {if (e) {let e;try {e = decodeURIComponent(wi(n)).replace(xi, "").toLowerCase();} catch (e) {return null;}if (0 === e.indexOf("javascript:") || 0 === e.indexOf("vbscript:") || 0 === e.indexOf("data:")) return null;}t && !_i.test(n) && (n = Ti(t, n));try {n = encodeURI(n).replace(/%25/g, "%");} catch (e) {return null;}return n;}, resolveUrl: Ti, noopTest: { exec: function () {} }, merge: function (e) {let t,n,i = 1;for (; i < arguments.length; i++) for (n in t = arguments[i], t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);return e;}, splitCells: function (e, t) {const n = e.replace(/\|/g, (e, t, n) => {let i = !1,s = t;for (; --s >= 0 && "\\" === n[s];) i = !i;return i ? "|" : " |";}).split(/ \|/);let i = 0;if (n.length > t) n.splice(t);else for (; n.length < t;) n.push("");for (; i < n.length; i++) n[i] = n[i].trim().replace(/\\\|/g, "|");return n;}, rtrim: Oi, findClosingBracket: function (e, t) {if (-1 === e.indexOf(t[1])) return -1;const n = e.length;let i = 0,s = 0;for (; s < n; s++) if ("\\" === e[s]) s++;else if (e[s] === t[0]) i++;else if (e[s] === t[1] && (i--, i < 0)) return s;return -1;}, checkSanitizeDeprecation: function (e) {e && e.sanitize && !e.silent && console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");}, repeatString: function (e, t) {if (t < 1) return "";let n = "";for (; t > 1;) 1 & t && (n += e), t >>= 1, e += e;return n + e;} };const Ai = li = class {constructor(e) {this.options = e || ai;}space(e) {const t = this.rules.block.newline.exec(e);if (t) return t[0].length > 1 ? { type: "space", raw: t[0] } : { raw: "\n" };}code(e, t) {const n = this.rules.block.code.exec(e);if (n) {const e = t[t.length - 1];if (e && "paragraph" === e.type) return { raw: n[0], text: n[0].trimRight() };const i = n[0].replace(/^ {1,4}/gm, "");return { type: "code", raw: n[0], codeBlockStyle: "indented", text: this.options.pedantic ? i : hi.rtrim(i, "\n") };}}fences(e) {const t = this.rules.block.fences.exec(e);if (t) {const e = t[0],n = function (e, t) {const n = e.match(/^(\s+)(?:```)/);if (null === n) return t;const i = n[1];return t.split("\n").map(e => {const t = e.match(/^\s+/);if (null === t) return e;const [n] = t;return n.length >= i.length ? e.slice(i.length) : e;}).join("\n");}(e, t[3] || "");return { type: "code", raw: e, lang: t[2] ? t[2].trim() : t[2], text: n };}}heading(e) {const t = this.rules.block.heading.exec(e);if (t) {let e = t[2].trim();if (/#$/.test(e)) {const t = hi.rtrim(e, "#");this.options.pedantic ? e = t.trim() : t && !/ $/.test(t) || (e = t.trim());}return { type: "heading", raw: t[0], depth: t[1].length, text: e };}}nptable(e) {const t = this.rules.block.nptable.exec(e);if (t) {const e = { type: "table", header: hi.splitCells(t[1].replace(/^ *| *\| *$/g, "")), align: t[2].replace(/^ *|\| *$/g, "").split(/ *\| */), cells: t[3] ? t[3].replace(/\n$/, "").split("\n") : [], raw: t[0] };if (e.header.length === e.align.length) {let t,n = e.align.length;for (t = 0; t < n; t++) /^ *-+: *$/.test(e.align[t]) ? e.align[t] = "right" : /^ *:-+: *$/.test(e.align[t]) ? e.align[t] = "center" : /^ *:-+ *$/.test(e.align[t]) ? e.align[t] = "left" : e.align[t] = null;for (n = e.cells.length, t = 0; t < n; t++) e.cells[t] = hi.splitCells(e.cells[t], e.header.length);return e;}}}hr(e) {const t = this.rules.block.hr.exec(e);if (t) return { type: "hr", raw: t[0] };}blockquote(e) {const t = this.rules.block.blockquote.exec(e);if (t) {const e = t[0].replace(/^ *> ?/gm, "");return { type: "blockquote", raw: t[0], text: e };}}list(e) {const t = this.rules.block.list.exec(e);if (t) {let e = t[0];const n = t[2],i = n.length > 1,s = { type: "list", raw: e, ordered: i, start: i ? +n.slice(0, -1) : "", loose: !1, items: [] },r = t[0].match(this.rules.block.item);let o,l,a,c,u,d,h,p,f = !1,g = r.length;a = this.rules.block.listItemStart.exec(r[0]);for (let t = 0; t < g; t++) {if (o = r[t], e = o, t !== g - 1) {if (c = this.rules.block.listItemStart.exec(r[t + 1]), this.options.pedantic ? c[1].length > a[1].length : c[1].length > a[0].length || c[1].length > 3) {r.splice(t, 2, r[t] + "\n" + r[t + 1]), t--, g--;continue;}(!this.options.pedantic || this.options.smartLists ? c[2][c[2].length - 1] !== n[n.length - 1] : i === (1 === c[2].length)) && (u = r.slice(t + 1).join("\n"), s.raw = s.raw.substring(0, s.raw.length - u.length), t = g - 1), a = c;}l = o.length, o = o.replace(/^ *([*+-]|\d+[.)]) ?/, ""), ~o.indexOf("\n ") && (l -= o.length, o = this.options.pedantic ? o.replace(/^ {1,4}/gm, "") : o.replace(new RegExp("^ {1," + l + "}", "gm"), "")), d = f || /\n\n(?!\s*$)/.test(o), t !== g - 1 && (f = "\n" === o.charAt(o.length - 1), d || (d = f)), d && (s.loose = !0), this.options.gfm && (h = /^\[[ xX]\] /.test(o), p = void 0, h && (p = " " !== o[1], o = o.replace(/^\[[ xX]\] +/, ""))), s.items.push({ type: "list_item", raw: e, task: h, checked: p, loose: d, text: o });}return s;}}html(e) {const t = this.rules.block.html.exec(e);if (t) return { type: this.options.sanitize ? "paragraph" : "html", raw: t[0], pre: !this.options.sanitizer && ("pre" === t[1] || "script" === t[1] || "style" === t[1]), text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(t[0]) : hi.escape(t[0]) : t[0] };}def(e) {const t = this.rules.block.def.exec(e);if (t) {t[3] && (t[3] = t[3].substring(1, t[3].length - 1));return { tag: t[1].toLowerCase().replace(/\s+/g, " "), raw: t[0], href: t[2], title: t[3] };}}table(e) {const t = this.rules.block.table.exec(e);if (t) {const e = { type: "table", header: hi.splitCells(t[1].replace(/^ *| *\| *$/g, "")), align: t[2].replace(/^ *|\| *$/g, "").split(/ *\| */), cells: t[3] ? t[3].replace(/\n$/, "").split("\n") : [] };if (e.header.length === e.align.length) {e.raw = t[0];let n,i = e.align.length;for (n = 0; n < i; n++) /^ *-+: *$/.test(e.align[n]) ? e.align[n] = "right" : /^ *:-+: *$/.test(e.align[n]) ? e.align[n] = "center" : /^ *:-+ *$/.test(e.align[n]) ? e.align[n] = "left" : e.align[n] = null;for (i = e.cells.length, n = 0; n < i; n++) e.cells[n] = hi.splitCells(e.cells[n].replace(/^ *\| *| *\| *$/g, ""), e.header.length);return e;}}}lheading(e) {const t = this.rules.block.lheading.exec(e);if (t) return { type: "heading", raw: t[0], depth: "=" === t[2].charAt(0) ? 1 : 2, text: t[1] };}paragraph(e) {const t = this.rules.block.paragraph.exec(e);if (t) return { type: "paragraph", raw: t[0], text: "\n" === t[1].charAt(t[1].length - 1) ? t[1].slice(0, -1) : t[1] };}text(e, t) {const n = this.rules.block.text.exec(e);if (n) {const e = t[t.length - 1];return e && "text" === e.type ? { raw: n[0], text: n[0] } : { type: "text", raw: n[0], text: n[0] };}}escape(e) {const t = this.rules.inline.escape.exec(e);if (t) return { type: "escape", raw: t[0], text: hi.escape(t[1]) };}tag(e, t, n) {const i = this.rules.inline.tag.exec(e);if (i) return !t && /^<a /i.test(i[0]) ? t = !0 : t && /^<\/a>/i.test(i[0]) && (t = !1), !n && /^<(pre|code|kbd|script)(\s|>)/i.test(i[0]) ? n = !0 : n && /^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0]) && (n = !1), { type: this.options.sanitize ? "text" : "html", raw: i[0], inLink: t, inRawBlock: n, text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(i[0]) : hi.escape(i[0]) : i[0] };}link(e) {const t = this.rules.inline.link.exec(e);if (t) {const e = t[2].trim();if (!this.options.pedantic && /^</.test(e)) {if (!/>$/.test(e)) return;const t = hi.rtrim(e.slice(0, -1), "\\");if ((e.length - t.length) % 2 == 0) return;} else {const e = hi.findClosingBracket(t[2], "()");if (e > -1) {const n = (0 === t[0].indexOf("!") ? 5 : 4) + t[1].length + e;t[2] = t[2].substring(0, e), t[0] = t[0].substring(0, n).trim(), t[3] = "";}}let n = t[2],i = "";if (this.options.pedantic) {const e = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e && (n = e[1], i = e[3]);} else i = t[3] ? t[3].slice(1, -1) : "";return n = n.trim(), /^</.test(n) && (n = this.options.pedantic && !/>$/.test(e) ? n.slice(1) : n.slice(1, -1)), Mi(t, { href: n ? n.replace(this.rules.inline._escapes, "$1") : n, title: i ? i.replace(this.rules.inline._escapes, "$1") : i }, t[0]);}}reflink(e, t) {let n;if ((n = this.rules.inline.reflink.exec(e)) || (n = this.rules.inline.nolink.exec(e))) {let e = (n[2] || n[1]).replace(/\s+/g, " ");if (e = t[e.toLowerCase()], !e || !e.href) {const e = n[0].charAt(0);return { type: "text", raw: e, text: e };}return Mi(n, e, n[0]);}}strong(e, t, n = "") {let i = this.rules.inline.strong.start.exec(e);if (i && (!i[1] || i[1] && ("" === n || this.rules.inline.punctuation.exec(n)))) {t = t.slice(-1 * e.length);const n = "**" === i[0] ? this.rules.inline.strong.endAst : this.rules.inline.strong.endUnd;let s;for (n.lastIndex = 0; null != (i = n.exec(t));) if (s = this.rules.inline.strong.middle.exec(t.slice(0, i.index + 3)), s) return { type: "strong", raw: e.slice(0, s[0].length), text: e.slice(2, s[0].length - 2) };}}em(e, t, n = "") {let i = this.rules.inline.em.start.exec(e);if (i && (!i[1] || i[1] && ("" === n || this.rules.inline.punctuation.exec(n)))) {t = t.slice(-1 * e.length);const n = "*" === i[0] ? this.rules.inline.em.endAst : this.rules.inline.em.endUnd;let s;for (n.lastIndex = 0; null != (i = n.exec(t));) if (s = this.rules.inline.em.middle.exec(t.slice(0, i.index + 2)), s) return { type: "em", raw: e.slice(0, s[0].length), text: e.slice(1, s[0].length - 1) };}}codespan(e) {const t = this.rules.inline.code.exec(e);if (t) {let e = t[2].replace(/\n/g, " ");const n = /[^ ]/.test(e),i = /^ /.test(e) && / $/.test(e);return n && i && (e = e.substring(1, e.length - 1)), e = hi.escape(e, !0), { type: "codespan", raw: t[0], text: e };}}br(e) {const t = this.rules.inline.br.exec(e);if (t) return { type: "br", raw: t[0] };}del(e) {const t = this.rules.inline.del.exec(e);if (t) return { type: "del", raw: t[0], text: t[2] };}autolink(e, t) {const n = this.rules.inline.autolink.exec(e);if (n) {let e, i;return "@" === n[2] ? (e = hi.escape(this.options.mangle ? t(n[1]) : n[1]), i = "mailto:" + e) : (e = hi.escape(n[1]), i = e), { type: "link", raw: n[0], text: e, href: i, tokens: [{ type: "text", raw: e, text: e }] };}}url(e, t) {let n;if (n = this.rules.inline.url.exec(e)) {let e, i;if ("@" === n[2]) e = hi.escape(this.options.mangle ? t(n[0]) : n[0]), i = "mailto:" + e;else {let t;do {t = n[0], n[0] = this.rules.inline._backpedal.exec(n[0])[0];} while (t !== n[0]);e = hi.escape(n[0]), i = "www." === n[1] ? "http://" + e : e;}return { type: "link", raw: n[0], text: e, href: i, tokens: [{ type: "text", raw: e, text: e }] };}}inlineText(e, t, n) {const i = this.rules.inline.text.exec(e);if (i) {let e;return e = t ? this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(i[0]) : hi.escape(i[0]) : i[0] : hi.escape(this.options.smartypants ? n(i[0]) : i[0]), { type: "text", raw: i[0], text: e };}}};var $i;const Li = { newline: /^(?: *(?:\n|$))+/, code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/, fences: /^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/, hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/, heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/, blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/, list: /^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/, html: "^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))", def: /^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/, nptable: hi.noopTest, table: hi.noopTest, lheading: /^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/, _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/, text: /^[^\n]+/, _label: /(?!\s*\])(?:\\[\[\]]|[^\[\]])+/, _title: /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/ };Li.def = hi.edit(Li.def).replace("label", Li._label).replace("title", Li._title).getRegex(), Li.bullet = /(?:[*+-]|\d{1,9}[.)])/, Li.item = /^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/, Li.item = hi.edit(Li.item, "gm").replace(/bull/g, Li.bullet).getRegex(), Li.listItemStart = hi.edit(/^( *)(bull)/).replace("bull", Li.bullet).getRegex(), Li.list = hi.edit(Li.list).replace(/bull/g, Li.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + Li.def.source + ")").getRegex(), Li._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul", Li._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/, Li.html = hi.edit(Li.html, "i").replace("comment", Li._comment).replace("tag", Li._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(), Li.paragraph = hi.edit(Li._paragraph).replace("hr", Li.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag", Li._tag).getRegex(), Li.blockquote = hi.edit(Li.blockquote).replace("paragraph", Li.paragraph).getRegex(), Li.normal = hi.merge({}, Li), Li.gfm = hi.merge({}, Li.normal, { nptable: "^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)", table: "^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)" }), Li.gfm.nptable = hi.edit(Li.gfm.nptable).replace("hr", Li.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag", Li._tag).getRegex(), Li.gfm.table = hi.edit(Li.gfm.table).replace("hr", Li.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag", Li._tag).getRegex(), Li.pedantic = hi.merge({}, Li.normal, { html: hi.edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment", Li._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(), def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/, heading: /^(#{1,6})(.*)(?:\n+|$)/, fences: hi.noopTest, paragraph: hi.edit(Li.normal._paragraph).replace("hr", Li.hr).replace("heading", " *#{1,6} *[^\n]").replace("lheading", Li.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex() });const Ri = { escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/, autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/, url: hi.noopTest, tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>", link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/, reflink: /^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/, nolink: /^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/, reflinkSearch: "reflink|nolink(?!\\()", strong: { start: /^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/, middle: /^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/, endAst: /[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/, endUnd: /[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/ }, em: { start: /^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/, middle: /^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/, endAst: /[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/, endUnd: /[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/ }, code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/, br: /^( {2,}|\\)\n(?!\s*$)/, del: hi.noopTest, text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/, punctuation: /^([\s*punctuation])/ };function zi(e) {return e.replace(/---/g, "—").replace(/--/g, "–").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1‘").replace(/'/g, "’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1“").replace(/"/g, "”").replace(/\.{3}/g, "…");}function Ii(e) {let t,n,i = "";const s = e.length;for (t = 0; t < s; t++) n = e.charCodeAt(t), Math.random() > .5 && (n = "x" + n.toString(16)), i += "&#" + n + ";";return i;}Ri._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~", Ri.punctuation = hi.edit(Ri.punctuation).replace(/punctuation/g, Ri._punctuation).getRegex(), Ri._blockSkip = "\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>", Ri._overlapSkip = "__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*", Ri._comment = hi.edit(Li._comment).replace("(?:--\x3e|$)", "--\x3e").getRegex(), Ri.em.start = hi.edit(Ri.em.start).replace(/punctuation/g, Ri._punctuation).getRegex(), Ri.em.middle = hi.edit(Ri.em.middle).replace(/punctuation/g, Ri._punctuation).replace(/overlapSkip/g, Ri._overlapSkip).getRegex(), Ri.em.endAst = hi.edit(Ri.em.endAst, "g").replace(/punctuation/g, Ri._punctuation).getRegex(), Ri.em.endUnd = hi.edit(Ri.em.endUnd, "g").replace(/punctuation/g, Ri._punctuation).getRegex(), Ri.strong.start = hi.edit(Ri.strong.start).replace(/punctuation/g, Ri._punctuation).getRegex(), Ri.strong.middle = hi.edit(Ri.strong.middle).replace(/punctuation/g, Ri._punctuation).replace(/overlapSkip/g, Ri._overlapSkip).getRegex(), Ri.strong.endAst = hi.edit(Ri.strong.endAst, "g").replace(/punctuation/g, Ri._punctuation).getRegex(), Ri.strong.endUnd = hi.edit(Ri.strong.endUnd, "g").replace(/punctuation/g, Ri._punctuation).getRegex(), Ri.blockSkip = hi.edit(Ri._blockSkip, "g").getRegex(), Ri.overlapSkip = hi.edit(Ri._overlapSkip, "g").getRegex(), Ri._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g, Ri._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/, Ri._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/, Ri.autolink = hi.edit(Ri.autolink).replace("scheme", Ri._scheme).replace("email", Ri._email).getRegex(), Ri._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/, Ri.tag = hi.edit(Ri.tag).replace("comment", Ri._comment).replace("attribute", Ri._attribute).getRegex(), Ri._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/, Ri._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/, Ri._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/, Ri.link = hi.edit(Ri.link).replace("label", Ri._label).replace("href", Ri._href).replace("title", Ri._title).getRegex(), Ri.reflink = hi.edit(Ri.reflink).replace("label", Ri._label).getRegex(), Ri.reflinkSearch = hi.edit(Ri.reflinkSearch, "g").replace("reflink", Ri.reflink).replace("nolink", Ri.nolink).getRegex(), Ri.normal = hi.merge({}, Ri), Ri.pedantic = hi.merge({}, Ri.normal, { strong: { start: /^__|\*\*/, middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/, endAst: /\*\*(?!\*)/g, endUnd: /__(?!_)/g }, em: { start: /^_|\*/, middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/, endAst: /\*(?!\*)/g, endUnd: /_(?!_)/g }, link: hi.edit(/^!?\[(label)\]\((.*?)\)/).replace("label", Ri._label).getRegex(), reflink: hi.edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", Ri._label).getRegex() }), Ri.gfm = hi.merge({}, Ri.normal, { escape: hi.edit(Ri.escape).replace("])", "~|])").getRegex(), _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/, url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/, _backpedal: /(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/, del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/, text: /^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/ }), Ri.gfm.url = hi.edit(Ri.gfm.url, "i").replace("email", Ri.gfm._extended_email).getRegex(), Ri.breaks = hi.merge({}, Ri.gfm, { br: hi.edit(Ri.br).replace("{2,}", "*").getRegex(), text: hi.edit(Ri.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex() }), $i = { block: Li, inline: Ri };const Di = class e {constructor(e) {this.tokens = [], this.tokens.links = Object.create(null), this.options = e || ai, this.options.tokenizer = this.options.tokenizer || new Ai(), this.tokenizer = this.options.tokenizer, this.tokenizer.options = this.options;const t = { block: $i.block.normal, inline: $i.inline.normal };this.options.pedantic ? (t.block = $i.block.pedantic, t.inline = $i.inline.pedantic) : this.options.gfm && (t.block = $i.block.gfm, this.options.breaks ? t.inline = $i.inline.breaks : t.inline = $i.inline.gfm), this.tokenizer.rules = t;}static get rules() {return { block: $i.block, inline: $i.inline };}static lex(t, n) {return new e(n).lex(t);}static lexInline(t, n) {return new e(n).inlineTokens(t);}lex(e) {return e = e.replace(/\r\n|\r/g, "\n").replace(/\t/g, "    "), this.blockTokens(e, this.tokens, !0), this.inline(this.tokens), this.tokens;}blockTokens(e, t = [], n = !0) {let i, s, r, o;for (this.options.pedantic && (e = e.replace(/^ +$/gm, "")); e;) if (i = this.tokenizer.space(e)) e = e.substring(i.raw.length), i.type && t.push(i);else if (i = this.tokenizer.code(e, t)) e = e.substring(i.raw.length), i.type ? t.push(i) : (o = t[t.length - 1], o.raw += "\n" + i.raw, o.text += "\n" + i.text);else if (i = this.tokenizer.fences(e)) e = e.substring(i.raw.length), t.push(i);else if (i = this.tokenizer.heading(e)) e = e.substring(i.raw.length), t.push(i);else if (i = this.tokenizer.nptable(e)) e = e.substring(i.raw.length), t.push(i);else if (i = this.tokenizer.hr(e)) e = e.substring(i.raw.length), t.push(i);else if (i = this.tokenizer.blockquote(e)) e = e.substring(i.raw.length), i.tokens = this.blockTokens(i.text, [], n), t.push(i);else if (i = this.tokenizer.list(e)) {for (e = e.substring(i.raw.length), r = i.items.length, s = 0; s < r; s++) i.items[s].tokens = this.blockTokens(i.items[s].text, [], !1);t.push(i);} else if (i = this.tokenizer.html(e)) e = e.substring(i.raw.length), t.push(i);else if (n && (i = this.tokenizer.def(e))) e = e.substring(i.raw.length), this.tokens.links[i.tag] || (this.tokens.links[i.tag] = { href: i.href, title: i.title });else if (i = this.tokenizer.table(e)) e = e.substring(i.raw.length), t.push(i);else if (i = this.tokenizer.lheading(e)) e = e.substring(i.raw.length), t.push(i);else if (n && (i = this.tokenizer.paragraph(e))) e = e.substring(i.raw.length), t.push(i);else if (i = this.tokenizer.text(e, t)) e = e.substring(i.raw.length), i.type ? t.push(i) : (o = t[t.length - 1], o.raw += "\n" + i.raw, o.text += "\n" + i.text);else if (e) {const t = "Infinite loop on byte: " + e.charCodeAt(0);if (this.options.silent) {console.error(t);break;}throw new Error(t);}return t;}inline(e) {let t, n, i, s, r, o;const l = e.length;for (t = 0; t < l; t++) switch (o = e[t], o.type) {case "paragraph":case "text":case "heading":o.tokens = [], this.inlineTokens(o.text, o.tokens);break;case "table":for (o.tokens = { header: [], cells: [] }, s = o.header.length, n = 0; n < s; n++) o.tokens.header[n] = [], this.inlineTokens(o.header[n], o.tokens.header[n]);for (s = o.cells.length, n = 0; n < s; n++) for (r = o.cells[n], o.tokens.cells[n] = [], i = 0; i < r.length; i++) o.tokens.cells[n][i] = [], this.inlineTokens(r[i], o.tokens.cells[n][i]);break;case "blockquote":this.inline(o.tokens);break;case "list":for (s = o.items.length, n = 0; n < s; n++) this.inline(o.items[n].tokens);}return e;}inlineTokens(e, t = [], n = !1, i = !1) {let s,r,o,l,a = e;if (this.tokens.links) {const e = Object.keys(this.tokens.links);if (e.length > 0) for (; null != (r = this.tokenizer.rules.inline.reflinkSearch.exec(a));) e.includes(r[0].slice(r[0].lastIndexOf("[") + 1, -1)) && (a = a.slice(0, r.index) + "[" + hi.repeatString("a", r[0].length - 2) + "]" + a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));}for (; null != (r = this.tokenizer.rules.inline.blockSkip.exec(a));) a = a.slice(0, r.index) + "[" + hi.repeatString("a", r[0].length - 2) + "]" + a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for (; e;) if (o || (l = ""), o = !1, s = this.tokenizer.escape(e)) e = e.substring(s.raw.length), t.push(s);else if (s = this.tokenizer.tag(e, n, i)) e = e.substring(s.raw.length), n = s.inLink, i = s.inRawBlock, t.push(s);else if (s = this.tokenizer.link(e)) e = e.substring(s.raw.length), "link" === s.type && (s.tokens = this.inlineTokens(s.text, [], !0, i)), t.push(s);else if (s = this.tokenizer.reflink(e, this.tokens.links)) e = e.substring(s.raw.length), "link" === s.type && (s.tokens = this.inlineTokens(s.text, [], !0, i)), t.push(s);else if (s = this.tokenizer.strong(e, a, l)) e = e.substring(s.raw.length), s.tokens = this.inlineTokens(s.text, [], n, i), t.push(s);else if (s = this.tokenizer.em(e, a, l)) e = e.substring(s.raw.length), s.tokens = this.inlineTokens(s.text, [], n, i), t.push(s);else if (s = this.tokenizer.codespan(e)) e = e.substring(s.raw.length), t.push(s);else if (s = this.tokenizer.br(e)) e = e.substring(s.raw.length), t.push(s);else if (s = this.tokenizer.del(e)) e = e.substring(s.raw.length), s.tokens = this.inlineTokens(s.text, [], n, i), t.push(s);else if (s = this.tokenizer.autolink(e, Ii)) e = e.substring(s.raw.length), t.push(s);else if (n || !(s = this.tokenizer.url(e, Ii))) {if (s = this.tokenizer.inlineText(e, i, zi)) e = e.substring(s.raw.length), l = s.raw.slice(-1), o = !0, t.push(s);else if (e) {const t = "Infinite loop on byte: " + e.charCodeAt(0);if (this.options.silent) {console.error(t);break;}throw new Error(t);}} else e = e.substring(s.raw.length), t.push(s);return t;}};var ji;const Ni = ji = class {constructor(e) {this.options = e || ai;}code(e, t, n) {const i = (t || "").match(/\S*/)[0];if (this.options.highlight) {const t = this.options.highlight(e, i);null != t && t !== e && (n = !0, e = t);}return e = e.replace(/\n$/, "") + "\n", i ? '<pre><code class="' + this.options.langPrefix + hi.escape(i, !0) + '">' + (n ? e : hi.escape(e, !0)) + "</code></pre>\n" : "<pre><code>" + (n ? e : hi.escape(e, !0)) + "</code></pre>\n";}blockquote(e) {return "<blockquote>\n" + e + "</blockquote>\n";}html(e) {return e;}heading(e, t, n, i) {return this.options.headerIds ? "<h" + t + ' id="' + this.options.headerPrefix + i.slug(n) + '">' + e + "</h" + t + ">\n" : "<h" + t + ">" + e + "</h" + t + ">\n";}hr() {return this.options.xhtml ? "<hr/>\n" : "<hr>\n";}list(e, t, n) {const i = t ? "ol" : "ul";return "<" + i + (t && 1 !== n ? ' start="' + n + '"' : "") + ">\n" + e + "</" + i + ">\n";}listitem(e) {return "<li>" + e + "</li>\n";}checkbox(e) {return "<input " + (e ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";}paragraph(e) {return "<p>" + e + "</p>\n";}table(e, t) {return t && (t = "<tbody>" + t + "</tbody>"), "<table>\n<thead>\n" + e + "</thead>\n" + t + "</table>\n";}tablerow(e) {return "<tr>\n" + e + "</tr>\n";}tablecell(e, t) {const n = t.header ? "th" : "td";return (t.align ? "<" + n + ' align="' + t.align + '">' : "<" + n + ">") + e + "</" + n + ">\n";}strong(e) {return "<strong>" + e + "</strong>";}em(e) {return "<em>" + e + "</em>";}codespan(e) {return "<code>" + e + "</code>";}br() {return this.options.xhtml ? "<br/>" : "<br>";}del(e) {return "<del>" + e + "</del>";}link(e, t, n) {if (null === (e = hi.cleanUrl(this.options.sanitize, this.options.baseUrl, e))) return n;let i = '<a href="' + hi.escape(e) + '"';return t && (i += ' title="' + t + '"'), i += ">" + n + "</a>", i;}image(e, t, n) {if (null === (e = hi.cleanUrl(this.options.sanitize, this.options.baseUrl, e))) return n;let i = '<img src="' + e + '" alt="' + n + '"';return t && (i += ' title="' + t + '"'), i += this.options.xhtml ? "/>" : ">", i;}text(e) {return e;}};var Bi;const Fi = Bi = class {strong(e) {return e;}em(e) {return e;}codespan(e) {return e;}del(e) {return e;}html(e) {return e;}text(e) {return e;}link(e, t, n) {return "" + n;}image(e, t, n) {return "" + n;}br() {return "";}};var qi;const Ui = qi = class {constructor() {this.seen = {};}serialize(e) {return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");}getNextSafeSlug(e, t) {let n = e,i = 0;if (this.seen.hasOwnProperty(n)) {i = this.seen[e];do {i++, n = e + "-" + i;} while (this.seen.hasOwnProperty(n));}return t || (this.seen[e] = i, this.seen[n] = 0), n;}slug(e, t = {}) {const n = this.serialize(e);return this.getNextSafeSlug(n, t.dryrun);}},Hi = class e {constructor(e) {this.options = e || ai, this.options.renderer = this.options.renderer || new Ni(), this.renderer = this.options.renderer, this.renderer.options = this.options, this.textRenderer = new Fi(), this.slugger = new Ui();}static parse(t, n) {return new e(n).parse(t);}static parseInline(t, n) {return new e(n).parseInline(t);}parse(e, t = !0) {let n,i,s,r,o,l,a,c,u,d,h,p,f,g,m,v,b,k,w = "";const y = e.length;for (n = 0; n < y; n++) switch (d = e[n], d.type) {case "space":continue;case "hr":w += this.renderer.hr();continue;case "heading":w += this.renderer.heading(this.parseInline(d.tokens), d.depth, hi.unescape(this.parseInline(d.tokens, this.textRenderer)), this.slugger);continue;case "code":w += this.renderer.code(d.text, d.lang, d.escaped);continue;case "table":for (c = "", a = "", r = d.header.length, i = 0; i < r; i++) a += this.renderer.tablecell(this.parseInline(d.tokens.header[i]), { header: !0, align: d.align[i] });for (c += this.renderer.tablerow(a), u = "", r = d.cells.length, i = 0; i < r; i++) {for (l = d.tokens.cells[i], a = "", o = l.length, s = 0; s < o; s++) a += this.renderer.tablecell(this.parseInline(l[s]), { header: !1, align: d.align[s] });u += this.renderer.tablerow(a);}w += this.renderer.table(c, u);continue;case "blockquote":u = this.parse(d.tokens), w += this.renderer.blockquote(u);continue;case "list":for (h = d.ordered, p = d.start, f = d.loose, r = d.items.length, u = "", i = 0; i < r; i++) m = d.items[i], v = m.checked, b = m.task, g = "", m.task && (k = this.renderer.checkbox(v), f ? m.tokens.length > 0 && "text" === m.tokens[0].type ? (m.tokens[0].text = k + " " + m.tokens[0].text, m.tokens[0].tokens && m.tokens[0].tokens.length > 0 && "text" === m.tokens[0].tokens[0].type && (m.tokens[0].tokens[0].text = k + " " + m.tokens[0].tokens[0].text)) : m.tokens.unshift({ type: "text", text: k }) : g += k), g += this.parse(m.tokens, f), u += this.renderer.listitem(g, b, v);w += this.renderer.list(u, h, p);continue;case "html":w += this.renderer.html(d.text);continue;case "paragraph":w += this.renderer.paragraph(this.parseInline(d.tokens));continue;case "text":for (u = d.tokens ? this.parseInline(d.tokens) : d.text; n + 1 < y && "text" === e[n + 1].type;) d = e[++n], u += "\n" + (d.tokens ? this.parseInline(d.tokens) : d.text);w += t ? this.renderer.paragraph(u) : u;continue;default:{const e = 'Token with "' + d.type + '" type was not found.';if (this.options.silent) return void console.error(e);throw new Error(e);}}return w;}parseInline(e, t) {t = t || this.renderer;let n,i,s = "";const r = e.length;for (n = 0; n < r; n++) switch (i = e[n], i.type) {case "escape":s += t.text(i.text);break;case "html":s += t.html(i.text);break;case "link":s += t.link(i.href, i.title, this.parseInline(i.tokens, t));break;case "image":s += t.image(i.href, i.title, i.text);break;case "strong":s += t.strong(this.parseInline(i.tokens, t));break;case "em":s += t.em(this.parseInline(i.tokens, t));break;case "codespan":s += t.codespan(i.text);break;case "br":s += t.br();break;case "del":s += t.del(this.parseInline(i.tokens, t));break;case "text":s += t.text(i.text);break;default:{const e = 'Token with "' + i.type + '" type was not found.';if (this.options.silent) return void console.error(e);throw new Error(e);}}return s;}},Wi = li,Vi = ji,Zi = Bi,Gi = qi;function Ki(e, t, n) {if (null == e) throw new Error("marked(): input parameter is undefined or null");if ("string" != typeof e) throw new Error("marked(): input parameter is of type " + Object.prototype.toString.call(e) + ", string expected");if ("function" == typeof t && (n = t, t = null), t = hi.merge({}, Ki.defaults, t || {}), hi.checkSanitizeDeprecation(t), n) {const i = t.highlight;let s;try {s = Di.lex(e, t);} catch (e) {return n(e);}const r = function (e) {let r;if (!e) try {r = Hi.parse(s, t);} catch (t) {e = t;}return t.highlight = i, e ? n(e) : n(null, r);};if (!i || i.length < 3) return r();if (delete t.highlight, !s.length) return r();let o = 0;return Ki.walkTokens(s, function (e) {"code" === e.type && (o++, setTimeout(() => {i(e.text, e.lang, function (t, n) {if (t) return r(t);null != n && n !== e.text && (e.text = n, e.escaped = !0), o--, 0 === o && r();});}, 0));}), void (0 === o && r());}try {const n = Di.lex(e, t);return t.walkTokens && Ki.walkTokens(n, t.walkTokens), Hi.parse(n, t);} catch (e) {if (e.message += "\nPlease report this to https://github.com/markedjs/marked.", t.silent) return "<p>An error occurred:</p><pre>" + hi.escape(e.message + "", !0) + "</pre>";throw e;}}Ki.options = Ki.setOptions = function (e) {return hi.merge(Ki.defaults, e), ui.changeDefaults(Ki.defaults), Ki;}, Ki.getDefaults = ui.getDefaults, Ki.defaults = ai, Ki.use = function (e) {const t = hi.merge({}, e);if (e.renderer) {const n = Ki.defaults.renderer || new Vi();for (const t in e.renderer) {const i = n[t];n[t] = (...s) => {let r = e.renderer[t].apply(n, s);return !1 === r && (r = i.apply(n, s)), r;};}t.renderer = n;}if (e.tokenizer) {const n = Ki.defaults.tokenizer || new Wi();for (const t in e.tokenizer) {const i = n[t];n[t] = (...s) => {let r = e.tokenizer[t].apply(n, s);return !1 === r && (r = i.apply(n, s)), r;};}t.tokenizer = n;}if (e.walkTokens) {const n = Ki.defaults.walkTokens;t.walkTokens = t => {e.walkTokens(t), n && n(t);};}Ki.setOptions(t);}, Ki.walkTokens = function (e, t) {for (const n of e) switch (t(n), n.type) {case "table":for (const e of n.tokens.header) Ki.walkTokens(e, t);for (const e of n.tokens.cells) for (const n of e) Ki.walkTokens(n, t);break;case "list":Ki.walkTokens(n.items, t);break;default:n.tokens && Ki.walkTokens(n.tokens, t);}}, Ki.parseInline = function (e, t) {if (null == e) throw new Error("marked.parseInline(): input parameter is undefined or null");if ("string" != typeof e) throw new Error("marked.parseInline(): input parameter is of type " + Object.prototype.toString.call(e) + ", string expected");t = hi.merge({}, Ki.defaults, t || {}), hi.checkSanitizeDeprecation(t);try {const n = Di.lexInline(e, t);return t.walkTokens && Ki.walkTokens(n, t.walkTokens), Hi.parseInline(n, t);} catch (e) {if (e.message += "\nPlease report this to https://github.com/markedjs/marked.", t.silent) return "<p>An error occurred:</p><pre>" + hi.escape(e.message + "", !0) + "</pre>";throw e;}}, Ki.Parser = Hi, Ki.parser = Hi.parse, Ki.Renderer = Vi, Ki.TextRenderer = Zi, Ki.Lexer = Di, Ki.lexer = Di.lex, Ki.Tokenizer = Wi, Ki.Slugger = Gi, Ki.parse = Ki;var Yi = function (e) {return e && e.__esModule ? e : { default: e };}(Ki),Xi = {},Ji = dt,Qi = ht;Object.defineProperty(Xi, "__esModule", { value: !0 });var es = function (e) {return (() => {const t = ts.cloneNode(!0);return t.__click = e.onClick, t;})();};Xi.FixButton = es;const ts = Ji('<button class="btn fix-btn">Fix</button>', 2);Qi(["click"]);const ns = si('<div class="linter-message"><div><div class="linter-text"><div class="provider-name"></div></div><div class="linter-buttons-right"></div></div></div>', 10),is = si('<a href="#"><span></span></a>', 4),ss = si('<a href="#"><span class="icon linter-icon icon-alignment-aligned-to"></span></a>', 4),rs = si('<a href="#"><span class="icon linter-icon icon-link"></span></a>', 4),os = si('<div class="linter-line"></div>', 2);function ls() {if ("function" != typeof WeakMap) return null;var e = new WeakMap();return ls = function () {return e;}, e;}function as(e) {if (!(e.target instanceof HTMLElement)) return;const t = function (e) {for (; e && !e.classList.contains("linter-line");) {if (e instanceof HTMLAnchorElement) return e.href;e = e.parentElement;}return null;}(e.target);if (!t) return;const { protocol: n, hostname: i, query: s } = ci.parse(t, !0);if ("atom:" === n && "linter" === i && s && s.file) {const { file: e, row: t, column: n } = s;(0, S.openFile)(Array.isArray(e) ? e[0] : e, { row: t ? parseInt(Array.isArray(t) ? t[0] : t, 10) : 0, column: n ? parseInt(Array.isArray(n) ? n[0] : n, 10) : 0 });}}ri(["click"]);var cs = xs(ii = ii.default),us = {};Object.defineProperty(us, "__esModule", { value: !0 });var ds = (hs = void 0, fs = us.makeOverlaySelectable = hs, ms = us.overlayFocusFix = fs, bs = us.focusEditor = ms, ks = us.blurEditor = bs, us.makeOverLayCopyable = ks);us.copyListener = ds;var hs = function (e, t, n = !0) {t.setAttribute("tabindex", "-1"), t.style.userSelect && "none" !== t.style.userSelect || (t.style.userSelect = "text"), n && ps(e, t), t.classList.add("native-key-bindings");};function ps(e, t) {const n = atom.views.getView(e).getComponent();t.addEventListener("mousedown", () => {vs(n), t.addEventListener("mouseleave", () => {gs(n);});});}us.makeOverlaySelectable = hs;var fs = ps;function gs(e) {null == e || e.didFocus();}us.overlayFocusFix = fs;var ms = gs;function vs(e) {null == e || e.didBlurHiddenInput({ relatedTarget: null });}us.focusEditor = ms;var bs = vs;us.blurEditor = bs;var ks = function (e) {e.addEventListener("mouseenter", () => {e.addEventListener("keydown", ws);}), e.addEventListener("mouseleave", () => {e.removeEventListener("keydown", ws);});};async function ws(e) {var t, n;if (e.preventDefault(), e.ctrlKey && "c" === e.key) {const e = null !== (n = null === (t = document.getSelection()) || void 0 === t ? void 0 : t.toString()) && void 0 !== n ? n : "";await navigator.clipboard.writeText(e);}}us.makeOverLayCopyable = ks, ds = ws, us.copyListener = ds;const ys = Jn('<div class="linter-messages"></div>', 2);function xs(e) {return e && e.__esModule ? e : { default: e };}Qn = class {constructor(e, t, n) {this.marker = void 0, this.element = document.createElement("div"), this.emitter = new c(), this.messages = void 0, this.subscriptions = new a(), this.messages = e, this.marker = n.markBufferRange([t, t]), this.marker.onDidDestroy(() => this.emitter.emit("did-destroy"));const i = new ni.default();(0, us.makeOverlaySelectable)(n, this.element), this.element.id = "linter-tooltip", n.decorateMarker(this.marker, { type: "overlay", item: this.element }), this.subscriptions.add(this.emitter, i);const s = [];e.forEach(e => {2 === e.version && s.push(st(cs.default, { get key() {return e.key;}, delegate: i, message: e }));}), ut(() => (() => {const e = ys.cloneNode(!0);return gt(e, s), e;})(), this.element), setTimeout(() => {const e = this.element.getBoundingClientRect().height,i = n.getLineHeightInPixels();if (e < (t.row - n.getFirstVisibleScreenRow()) * i) {const t = this.element.parentElement;t && (t.style.transform = `translateY(-${2 + i + e}px)`);} else {const e = n.getElement().querySelector(".datatip-overlay");if (e) {const t = this.element.parentElement;t && (t.style.transform = `translateY(${e.clientHeight}px)`);}}this.element.style.visibility = "visible";}, 50);}isValid(e, t) {if (1 !== this.messages.length || !t.has(this.messages[0].key)) return !1;const n = (0, S.$range)(this.messages[0]);return Boolean(n && n.containsPoint(e));}onDidDestroy(e) {return this.emitter.on("did-destroy", e);}dispose() {this.emitter.emit("did-destroy"), this.subscriptions.dispose();}}, Xn.default = Qn;var _s = Ts(Xn = Xn.default),Ss = {};Object.defineProperty(Ss, "__esModule", { value: !0 });var Ps = function (e, t, n) {const i = n.getComponent().pixelPositionForMouseEvent(e),s = n.getComponent().screenPositionForPixelPosition(i);if (Number.isNaN(s.row) || Number.isNaN(s.column)) return null;const r = n.pixelPositionForScreenPosition(s),o = i.top - r.top,l = i.left - r.left;if ((0 === o || o > 0 && o < 20 || o < 0 && o > -20) && (0 === l || l > 0 && l < 20 || l < 0 && l > -20)) return t.bufferPositionForScreenPosition(s);return null;};Ss.getBufferPositionFromMouseEvent = Ps;var Cs = function ({ event: e, editor: t, editorElement: n, tooltipElement: i, screenPosition: s }) {const r = n.getComponent().pixelPositionForMouseEvent(e),o = n.pixelPositionForScreenPosition(s),l = r.top - o.top,a = r.left - o.left,c = t.getLineHeightInPixels(),u = i.offsetHeight + c,d = i.offsetWidth;if (l > 0) {if (l > u + 1.5 * c) return !1;} else if (l < 0 && l < -1.5 * c) return !1;if (a > 0) {if (a > d + 30) return !1;} else if (a < 0 && a < -30) return !1;return !0;};Ss.mouseEventNearPosition = Cs;var Es = function (e, t) {let n = e;do {if (n.matches(t)) return !0;n = n.parentElement;} while (n && "HTML" !== n.nodeName);return !1;};Ss.hasParent = Es;function Ts(e) {return e && e.__esModule ? e : { default: e };}mn = class {constructor(e) {this.textEditor = void 0, this.gutter = null, this.tooltip = null, this.emitter = new c(), this.markers = new Map(), this.messages = new Map(), this.showTooltip = !0, this.subscriptions = new a(), this.cursorPosition = null, this.gutterPosition = void 0, this.tooltipFollows = "Both", this.showDecorations = void 0, this.showProviderName = !0, this.ignoreTooltipInvocation = !1, this.currentLineMarker = null, this.lastRange = void 0, this.lastIsEmpty = void 0, this.lastCursorPositions = new WeakMap(), this.textEditor = e;let t = null;this.subscriptions.add(this.emitter, e.onDidDestroy(() => {this.dispose();}), new u(function () {var e;null === (e = t) || void 0 === e || e.dispose();}), atom.config.observe("linter-ui-default.showProviderName", e => {this.showProviderName = e;}), atom.config.observe("linter-ui-default.showDecorations", e => {const t = void 0 !== this.showDecorations;this.showDecorations = e, t && this.updateGutter();}), atom.config.observe("linter-ui-default.gutterPosition", e => {const t = void 0 !== this.gutterPosition;this.gutterPosition = e, t && this.updateGutter();}), atom.config.observe("linter-ui-default.showTooltip", e => {this.showTooltip = e, !this.showTooltip && this.tooltip && this.removeTooltip();}), atom.config.observe("linter-ui-default.tooltipFollows", e => {this.tooltipFollows = e, t && t.dispose(), t = new a(), "Mouse" !== e && "Both" !== e || t.add(this.listenForMouseMovement()), "Keyboard" !== e && "Both" !== e || t.add(this.listenForKeyboardMovement()), this.removeTooltip();}), e.onDidChangeCursorPosition(({ cursor: e, newBufferPosition: t }) => {const n = this.lastCursorPositions.get(e);n && n.isEqual(t) || (this.lastCursorPositions.set(e, t), this.ignoreTooltipInvocation = !1), "Mouse" === this.tooltipFollows && this.removeTooltip();}), e.getBuffer().onDidChangeText(() => {e.getCursors().forEach(e => {this.lastCursorPositions.set(e, e.getBufferPosition());}), "Mouse" !== this.tooltipFollows && (this.ignoreTooltipInvocation = !0, this.removeTooltip());})), this.updateGutter(), this.listenForCurrentLine();}listenForCurrentLine() {this.subscriptions.add(this.textEditor.observeCursors(e => {const t = ({ start: e, end: t }) => {const n = this.gutter;if (!n || this.subscriptions.disposed) return;const i = d.fromObject([e, t]),s = d.fromObject([[e.row, 0], [t.row, 1 / 0]]),r = i.isEmpty();if (e.row !== t.row && 0 === i.end.column && s.end.row--, this.lastRange && this.lastRange.isEqual(s) && r === this.lastIsEmpty) return;this.currentLineMarker && (this.currentLineMarker.destroy(), this.currentLineMarker = null), this.lastRange = s, this.lastIsEmpty = r, this.currentLineMarker = this.textEditor.markScreenRange(s, { invalidate: "never" });const o = document.createElement("span");o.className = "line-number cursor-line linter-cursor-line " + (r ? "cursor-line-no-selection" : ""), n.decorateMarker(this.currentLineMarker, { item: o, class: "linter-row" });},n = e.getMarker(),i = new a();i.add(n.onDidChange(({ newHeadScreenPosition: e, newTailScreenPosition: n }) => {t({ start: e, end: n });})), i.add(e.onDidDestroy(() => {this.subscriptions.remove(i), i.dispose();})), i.add(new u(() => {this.currentLineMarker && (this.currentLineMarker.destroy(), this.currentLineMarker = null);})), this.subscriptions.add(i), t(n.getScreenRange());}));}listenForMouseMovement() {const e = atom.views.getView(this.textEditor);return (0, Yn.default)(e, "mousemove", (0, Kn.default)(t => {if (!e.getComponent() || this.subscriptions.disposed || !(0, Ss.hasParent)(t.target, "div.scroll-view")) return;const n = this.tooltip;n && (0, Ss.mouseEventNearPosition)({ event: t, editor: this.textEditor, editorElement: e, tooltipElement: n.element, screenPosition: n.marker.getStartScreenPosition() }) || (this.cursorPosition = (0, Ss.getBufferPositionFromMouseEvent)(t, this.textEditor, e), this.ignoreTooltipInvocation = !1, this.cursorPosition ? this.updateTooltip(this.cursorPosition) : this.removeTooltip());}, 100), { passive: !0 });}listenForKeyboardMovement() {return this.textEditor.onDidChangeCursorPosition((0, Kn.default)(({ newBufferPosition: e }) => {this.cursorPosition = e, this.updateTooltip(e);}, 16));}updateGutter() {if (this.removeGutter(), !this.showDecorations) return void (this.gutter = null);const e = "Left" === this.gutterPosition ? -100 : 100;this.gutter = this.textEditor.addGutter({ name: "linter-ui-default", priority: e }), this.markers.forEach((e, t) => {const n = this.messages.get(t);if (n) for (const t of e) this.decorateMarker(n, t, "gutter");});}removeGutter() {if (this.gutter) try {this.gutter.destroy();} catch (e) {}}updateTooltip(e) {if (!e || this.tooltip && this.tooltip.isValid(e, this.messages)) return;if (this.removeTooltip(), !this.showTooltip) return;if (this.ignoreTooltipInvocation) return;const t = (0, S.filterMessagesByRangeOrPoint)(this.messages, this.textEditor.getPath(), e);if (!t.length) return;this.tooltip = new _s.default(t, e, this.textEditor);const n = this.tooltip.marker;t.forEach(e => {this.saveMarker(e.key, n);}), this.tooltip.onDidDestroy(() => {this.tooltip = null;});}removeTooltip() {this.tooltip && this.tooltip.marker.destroy();}apply(e, t) {const n = this.textEditor.getBuffer();for (let e = 0, n = t.length; e < n; e++) {const n = t[e];this.destroyMarker(n.key);}for (let t = 0, i = e.length; t < i; t++) {const i = e[t],s = (0, S.$range)(i);if (!s) continue;const r = n.markRange(s, { invalidate: "never" });this.decorateMarker(i, r), r.onDidChange(({ oldHeadPosition: e, newHeadPosition: t, isValid: n }) => {!n || 0 === t.row && 0 !== e.row || 2 === i.version && (i.location.position = r.previousEventState.range);});}this.updateTooltip(this.cursorPosition);}decorateMarker(e, t, n = "both") {this.saveMarker(e.key, t), this.messages.set(e.key, e), "both" !== n && "editor" !== n || this.textEditor.decorateMarker(t, { type: "text", class: `linter-highlight linter-${e.severity}` });const i = this.gutter;if (i && ("both" === n || "gutter" === n)) {const n = document.createElement("span");n.className = `linter-gutter linter-gutter-${e.severity} icon icon-${e.icon || "primitive-dot"}`, i.decorateMarker(t, { class: "linter-row", item: n });}}saveMarker(e, t) {const n = this.markers.get(e) || [];n.push(t), this.markers.set(e, n);}destroyMarker(e) {const t = this.markers.get(e);t && t.forEach(e => {e && e.destroy();}), this.markers.delete(e), this.messages.delete(e);}onDidDestroy(e) {return this.emitter.on("did-destroy", e);}dispose() {this.emitter.emit("did-destroy"), this.subscriptions.dispose(), this.removeGutter(), this.removeTooltip();}}, gn.default = mn;var Os = function (e) {return e && e.__esModule ? e : { default: e };}(gn = gn.default);fn = class {constructor() {this.editors = new Set(), this.messages = [], this.firstRender = !0, this.subscriptions = new a(), this.subscriptions.add(atom.workspace.observeTextEditors(e => {if ((0, S.isLargeFile)(e)) {const t = atom.notifications.addWarning("Linter: Large/Minified file detected", { detail: "Adding inline linter markers are skipped for this file for performance reasons (linter pane is still active)", dismissable: !0, buttons: [{ text: "Force enable", onDidClick: () => {this.getEditor(e), t.dismiss();} }, { text: "Change threshold", onDidClick: async () => {var e;await atom.workspace.open("atom://config/packages/linter-ui-default"), null === (e = document.querySelectorAll(".control-group")[16]) || void 0 === e || e.scrollIntoView(), t.dismiss();} }] });setTimeout(() => {t.dismiss();}, 5e3);} else this.getEditor(e);}), atom.workspace.getCenter().observeActivePaneItem(e => {this.editors.forEach(t => {t.textEditor !== e && t.removeTooltip();});}));}isFirstRender() {return this.firstRender;}update({ messages: e, added: t, removed: n }) {this.messages = e, this.firstRender = !1;const { editorsMap: i, filePaths: s } = (0, S.getEditorsMap)(this);t.forEach(function (e) {if (!e || !e.location) return;const t = (0, S.$file)(e);t && i.has(t) && i.get(t).added.push(e);}), n.forEach(function (e) {if (!e || !e.location) return;const t = (0, S.$file)(e);t && i.has(t) && i.get(t).removed.push(e);}), s.forEach(function (e) {if (i.has(e)) {const { added: t, removed: n, editors: s } = i.get(e);(t.length || n.length) && s.forEach(e => e.apply(t, n));}});}getEditor(e) {for (const t of this.editors) if (t.textEditor === e) return t;const t = new Os.default(e);return this.editors.add(t), t.onDidDestroy(() => {this.editors.delete(t);}), t.subscriptions.add(e.onDidChangePath(() => {t.dispose(), this.getEditor(e);})), t.subscriptions.add(e.onDidChangeGrammar(() => {t.dispose(), this.getEditor(e);})), t.apply((0, S.filterMessages)(this.messages, e.getPath()), []), t;}dispose() {for (const e of this.editors) e.dispose();this.subscriptions.dispose();}}, pn.default = fn;var Ms = Zs(pn = pn.default),As = {};Object.defineProperty(As, "__esModule", { value: !0 });var $s = void 0;As.default = $s;var Ls = Hs(vn),Rs = Hs(s),zs = {};Object.defineProperty(zs, "__esModule", { value: !0 });var Is = Fs;zs.getChunks = Is;var Ds = qs;zs.getChunksByProjects = Ds;var js = Us;zs.mergeChange = js;var Ns = function (e, t) {const n = {},i = atom.project.getPaths();return t.forEach(function (t) {const s = (0, S.$file)(t);if (s) {("Files" === e ? [s] : qs(s, i)).forEach(e => Us(n, e, t.severity));}}), n;};zs.calculateDecorations = Ns;var Bs = function (e) {return e && e.__esModule ? e : { default: e };}(n);function Fs(e, t) {const n = [],i = e.split(Bs.default.sep);for (; i.length;) {const e = i.join(Bs.default.sep);if (e && (n.push(e), e === t)) break;i.pop();}return n;}function qs(e, t) {const n = t.find(t => e.startsWith(t));return n ? Fs(e, n) : [e];}function Us(e, t, n) {e[t] || (e[t] = { info: !1, error: !1, warning: !1 }), e[t][n] = !0;}function Hs(e) {return e && e.__esModule ? e : { default: e };}class Ws {constructor() {this.messages = [], this.decorations = {}, this.subscriptions = new a(), this.decorateOnTreeView = void 0, this.subscriptions.add(atom.config.observe("linter-ui-default.decorateOnTreeView", e => {if (void 0 === this.decorateOnTreeView) this.decorateOnTreeView = e;else if ("None" === e) this.update([]), this.decorateOnTreeView = e;else {const t = this.messages;this.decorateOnTreeView = e, this.update(t);}})), setTimeout(() => {const e = Ws.getElement();e && this.subscriptions.add((0, Rs.default)(e, "click", (0, Ls.default)(() => {this.update();}), { passive: !0 }));}, 100);}update(e = null) {Array.isArray(e) && (this.messages = e);const t = this.messages,n = Ws.getElement(),i = this.decorateOnTreeView;n && "None" !== i && this.applyDecorations((0, zs.calculateDecorations)(i, t));}applyDecorations(e) {const t = Ws.getElement();if (!t) return;const n = {},i = {};Object.keys(this.decorations).forEach(i => {if ({}.hasOwnProperty.call(this.decorations, i) && !e[i]) {const e = n[i] || (n[i] = Ws.getElementByPath(t, i));e && this.removeDecoration(e);}}), Object.keys(e).forEach(s => {if (!{}.hasOwnProperty.call(e, s)) return;const r = n[s] || (n[s] = Ws.getElementByPath(t, s));r && (this.handleDecoration(r, !!this.decorations[s], e[s]), i[s] = e[s]);}), this.decorations = i;}handleDecoration(e, t = !1, n) {let i = null;t && (i = e.querySelector("linter-decoration")), null !== i ? i.className = "" : (i = document.createElement("linter-decoration"), e.appendChild(i)), n.error ? i.classList.add("linter-error") : n.warning ? i.classList.add("linter-warning") : n.info && i.classList.add("linter-info");}removeDecoration(e) {const t = e.querySelector("linter-decoration");t && t.remove();}dispose() {this.subscriptions.dispose();}static getElement() {return document.querySelector(".tree-view");}static getElementByPath(e, t) {return e.querySelector(`[data-path=${CSS.escape(t)}]`);}}$s = Ws, As.default = $s;var Vs = Zs(As = As.default);function Zs(e) {return e && e.__esModule ? e : { default: e };}k = class {constructor() {this.name = "Linter", this.panel = void 0, this.signal = new cn.default(), this.editors = void 0, this.treeview = void 0, this.commands = new Kt.default(), this.messages = [], this.statusBar = new on.default(), this.intentions = new hn.default(), this.subscriptions = new a(), this.idleCallbacks = new Set(), this.subscriptions.add(this.signal, this.commands, this.statusBar);const e = window.requestIdleCallback(() => {this.idleCallbacks.delete(e), this.panel = new Ht.default(), this.panel.update(this.messages);});this.idleCallbacks.add(e);const t = window.requestIdleCallback(() => {this.idleCallbacks.delete(t), this.subscriptions.add(atom.config.observe("linter-ui-default.showDecorations", e => {e && !this.editors ? (this.editors = new Ms.default(), this.editors.update({ added: this.messages, removed: [], messages: this.messages })) : !e && this.editors && (this.editors.dispose(), this.editors = null);}));});this.idleCallbacks.add(t);}render(e) {const t = this.editors;this.messages = e.messages, t && (t.isFirstRender() ? t.update({ added: e.messages, removed: [], messages: e.messages }) : t.update(e)), this.treeview || (this.treeview = new Vs.default(), this.subscriptions.add(this.treeview)), this.treeview.update(e.messages), this.panel && this.panel.update(e.messages), this.commands.update(e.messages), this.intentions.update(e.messages), this.statusBar.update(e.messages);}didBeginLinting(e, t) {this.signal.didBeginLinting(e, t);}didFinishLinting(e, t) {this.signal.didFinishLinting(e, t);}dispose() {this.idleCallbacks.forEach(e => window.cancelIdleCallback(e)), this.idleCallbacks.clear(), this.subscriptions.dispose(), this.panel && this.panel.dispose(), this.editors && this.editors.dispose();}}, b.default = k;var Gs = function (e) {return e && e.__esModule ? e : { default: e };}(b = b.default);const Ks = new Set(),Ys = new Set();let Xs, Js;